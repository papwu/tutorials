<!DOCTYPE html>
<html lang="en-US">
<head>
<title>Metasploit - Quick Guide</title>
<meta charset="utf-8">
<meta name="description" content="Metasploit - Quick Guide - Metasploit is one of the most powerful tools used for penetration testing. Most of its resources can be found at − www.metasploit.com. It comes in two version"/>
<meta name="keywords" content="C, C++, Python, Java, HTML, CSS, JavaScript, SQL, PHP, jQuery, XML, DOM, Bootstrap, Tutorials, Articles, Programming, training, learning, quiz, preferences, examples, code"/>
<link rel="canonical" href="https://www.tutorialspoint.com/metasploit/metasploit_quick_guide.htm" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes">
<script src="/theme/js/script-min-v2.js?v=3"></script>
<link rel="stylesheet" href="/theme/css/style-min-v2.css?v=6">
<script src="//services.bilsyndication.com/adv1/?d=901" defer="" async=""></script>
<script> var vitag = vitag || {};</script>
<script> vitag.outStreamConfig = { enablePC: false, enableMobile: false };</script>  
<style>
.right-menu .mui-btn {
    background-color:#167abd;
}
a.demo {
    background:#167abd;
}
li.heading {
    background:#167abd;
}
.course-box{background:#167abd}
.home-intro-sub p{color:#167abd}
</style>
</head>
<body>
<header id="header">
<!-- Top sub-menu Starts Here -->
<div class="mui-appbar mui-container-fulid top-menu">
<div class="mui-container">
<div class="top-menu-item home">
<a href="https://www.tutorialspoint.com/index.htm" target="_blank" title="TutorialsPoint - Home"><i class="fal fa-home"></i> <span>Home</span></a>
</div>
<div class="top-menu-item qa">
<a href="https://www.tutorialspoint.com/about/about_careers.htm" target="_blank" title="Job @ Tutorials Point"><i class="fa fa-suitcase"></i> <span>Jobs</span></a>
</div>
<div class="top-menu-item tools">
<a href="https://www.tutorialspoint.com/online_dev_tools.htm" target="_blank" title="Tools - Online Development and Testing Tools"><i class="fal fa-cogs"></i> <span>Tools</span></a>
</div>
<div class="top-menu-item coding-ground">
<a href="https://www.tutorialspoint.com/codingground.htm" target="_blank" title="Coding Ground - Free Online IDE and Terminal"><i class="fal fa-code"></i> <span>Coding Ground </span></a> 
</div>
<div class="top-menu-item current-affairs">
<a href="https://www.tutorialspoint.com/current_affairs.htm" target="_blank" title="Daily Current Affairs"><i class="fal fa-layer-plus"></i> <span>Current Affairs</span></a>
</div>
<div class="top-menu-item upsc-notes">
<a href="https://www.tutorialspoint.com/upsc_ias_exams.htm" target="_blank" title="UPSC IAS Exams Notes - TutorialsPoint"><i class="fal fa-user-tie"></i> <span>UPSC Notes</span></a>
</div>      
<div class="top-menu-item online-tutoris">
<a href="https://www.tutorialspoint.com/tutor_connect/index.php" target="_blank" title="Top Online Tutors - Tutor Connect"><i class="fal fa-user"></i> <span>Online Tutors</span></a>
</div>
<div class="top-menu-item whiteboard">
<a href="https://www.tutorialspoint.com/whiteboard.htm" target="_blank" title="Free Online Whiteboard"><i class="fal fa-chalkboard"></i> <span>Whiteboard</span></a>
</div>
<div class="top-menu-item net-meeting">
<a href="https://www.tutorialspoint.com/netmeeting.php" target="_blank" title="A free tool for online video conferencing"><i class="fal fa-chalkboard-teacher"></i> <span>Net Meeting</span></a> 
</div>
<div class="top-menu-item articles">
<a href="https://www.tutorix.com" target="_blank" title="Tutorx - The Best Learning App" rel="nofollow"><i class="fal fa-video"></i> <span>Tutorix</span></a> 
</div>        
<div class="social-menu-item">
<a href="https://www.facebook.com/tutorialspointindia" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Facebook"><i class="fab fa-facebook-f"></i></a> 
<a href="https://www.twitter.com/tutorialspoint" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Twitter"><i class="fab fa-twitter"></i></a>
<a href="https://www.linkedin.com/company/tutorialspoint" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Linkedin"><i class="fab fa-linkedin-in"></i></a>
<a href="https://www.youtube.com/channel/UCVLbzhxVTiTLiVKeGV7WEBg" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint YouTube"><i class="fab fa-youtube"></i></a>
</div>        
</div>
</div>
<!-- Top sub-menu Ends Here -->
<!-- Top main-menu Starts Here -->
<div class="mui-appbar mui-container-fulid mui--appbar-line-height mui--z1" id="logo-menu">
<div class="mui-container">
<div class="left-menu">
<a href="https://www.tutorialspoint.com/index.htm" title="Tutorialspoint">
<img class="tp-logo" alt="tutorialspoint" src="/metasploit/images/logo.png">
</a>
<div class="mui-dropdown">
<a class="mui-btn mui-btn--primary categories" data-mui-toggle="dropdown"><i class="fa fa-th-large"></i> 
<span>Categories <span class="mui-caret"></span></span></a>            
<ul class="mui-dropdown__menu cat-menu">
<li>
<ul>
<li><a href="/academic_tutorials.htm"><i class="fa fa-caret-right"></i> Academic Tutorials</a></li>
<li><a href="/big_data_tutorials.htm"><i class="fa fa-caret-right"></i> Big Data &amp; Analytics </a></li>
<li><a href="/computer_programming_tutorials.htm"><i class="fa fa-caret-right"></i> Computer Programming </a></li>
<li><a href="/computer_science_tutorials.htm"><i class="fa fa-caret-right"></i> Computer Science </a></li>
<li><a href="/database_tutorials.htm"><i class="fa fa-caret-right"></i> Databases </a></li>
<li><a href="/devops_tutorials.htm"><i class="fa fa-caret-right"></i> DevOps </a></li>
<li><a href="/digital_marketing_tutorials.htm"><i class="fa fa-caret-right"></i> Digital Marketing </a></li>
<li><a href="/engineering_tutorials.htm"><i class="fa fa-caret-right"></i> Engineering Tutorials </a></li>
<li><a href="/upsc_ias_exams.htm"><i class="fa fa-caret-right"></i> Exams Syllabus </a></li>
<li><a href="/famous_monuments.htm"><i class="fa fa-caret-right"></i> Famous Monuments </a></li>
<li><a href="/gate_exams_tutorials.htm"><i class="fa fa-caret-right"></i> GATE Exams Tutorials</a></li>
<li><a href="/latest_technologies.htm"><i class="fa fa-caret-right"></i> Latest Technologies </a></li>
<li><a href="/machine_learning_tutorials.htm"><i class="fa fa-caret-right"></i> Machine Learning </a></li>
<li><a href="/mainframe_tutorials.htm"><i class="fa fa-caret-right"></i> Mainframe Development </a></li>
<li><a href="/management_tutorials.htm"><i class="fa fa-caret-right"></i> Management Tutorials </a></li>
<li><a href="/maths_tutorials.htm"><i class="fa fa-caret-right"></i> Mathematics Tutorials</a></li>
<li><a href="/microsoft_technologies_tutorials.htm"><i class="fa fa-caret-right"></i> Microsoft Technologies </a></li>
<li><a href="/misc_tutorials.htm"><i class="fa fa-caret-right"></i> Misc tutorials </a></li>
<li><a href="/mobile_development_tutorials.htm"><i class="fa fa-caret-right"></i> Mobile Development </a></li>
<li><a href="/java_technology_tutorials.htm"><i class="fa fa-caret-right"></i> Java Technologies </a></li>
<li><a href="/python_technologies_tutorials.htm"><i class="fa fa-caret-right"></i> Python Technologies </a></li>
<li><a href="/sap_tutorials.htm"><i class="fa fa-caret-right"></i> SAP Tutorials </a></li>
<li><a href="/scripting_lnaguage_tutorials.htm"><i class="fa fa-caret-right"></i>Programming Scripts </a></li>
<li><a href="/selected_reading.htm"><i class="fa fa-caret-right"></i> Selected Reading </a></li>
<li><a href="/software_quality_tutorials.htm"><i class="fa fa-caret-right"></i> Software Quality </a></li>
<li><a href="/soft_skill_tutorials.htm"><i class="fa fa-caret-right"></i> Soft Skills </a></li>
<li><a href="/telecom_tutorials.htm"><i class="fa fa-caret-right"></i> Telecom Tutorials </a></li>
<li><a href="/upsc_ias_exams.htm"><i class="fa fa-caret-right"></i> UPSC IAS Exams </a></li>
<li><a href="/web_development_tutorials.htm"><i class="fa fa-caret-right"></i> Web Development </a></li>
<li><a href="/sports_tutorials.htm"><i class="fa fa-caret-right"></i> Sports Tutorials </a></li>
<li><a href="/xml_technologies_tutorials.htm"><i class="fa fa-caret-right"></i> XML Technologies </a></li>
<li><a href="/multi_language_tutorials.htm"><i class="fa fa-caret-right"></i> Multi-Language Tutorials</a></li>
<li><a href="/questions_and_answers.htm"><i class="fa fa-caret-right"></i> Interview Questions</a></li>
</ul>
</li>
</ul>
<div class="clear"></div>
</div> 
</div>
<div class="right-menu">
<div class="toc-toggle">
<a href="javascript:void(0);"><i class="fa fa-bars"></i></a>
</div>
<div class="mobile-search-btn">
<a href="https://www.tutorialspoint.com/search.htm"><i class="fal fa-search"></i></a>
</div>
<div class="search-box">
<form method="get" class="" name="searchform" action="https://www.google.com/search" target="_blank" novalidate="">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com" class="user-valid valid">
<input class="header-search-box" type="text" id="search-string" name="q" placeholder="Search your favorite tutorials..." onfocus="if (this.value == 'Search your favorite tutorials...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search your favorite tutorials...';}" autocomplete="off">
<button><i class="fal fa-search"></i></button>
</form>
</div>
<div class="menu-btn library-btn">
<a href="https://www.tutorialspoint.com/tutorialslibrary.htm"><i class="fal fa-cubes"></i> <span>Library</span></a>
</div>
<div class="menu-btn videos-btn">
<a href="https://www.tutorialspoint.com/videotutorials/index.htm"><i class="fal fa-video"></i> <span>Videos</span></a> 
</div>
<div class="menu-btn videos-btn">
<a href="https://www.tutorialspoint.com/questions/index.php"><i class="fa fa-location-arrow"></i> <span>Q/A</span></a>
</div>
<div class="menu-btn ebooks-btn">
<a href="https://store.tutorialspoint.com"><i class="fal fa-book"></i> <span>eBooks</span></a>
</div>
<div class="mui-dropdown">
<button class="mui-btn mui-btn--primary" data-mui-toggle="dropdown">
<span class="mui-caret"></span>
</button>
<ul class="mui-dropdown__menu">
<li><a href="https://www.tutorialspoint.com/tutorialslibrary.htm"><i class="fal fa-cubes"></i> <span>Library</span></a></li>
<li><a href="https://www.tutorialspoint.com/videotutorials/index.htm"><i class="fal fa-video"></i> <span>Videos</span></a></li>
<li><a href="https://store.tutorialspoint.com"><i class="fal fa-book"></i> <span>eBooks</span></a></li>
</ul>
</div>
</div>
</div>
</div>
<!-- Top main-menu Ends Here -->
</header>
<div class="mui-container-fluid content">
<div class="mui-container">
<!-- Tutorial ToC Starts Here -->
<div class="mui-col-md-3 tutorial-toc">
<div class="mini-logo">
<img src="/metasploit/images/metasploit-mini-logo.jpg" alt="Metasploit Tutorial" />
</div>
<ul class="toc chapters">
<li class="heading">Metasploit Tutorial</li>
<li><a href="/metasploit/index.htm">Metasploit - Home</a></li>
<li><a href="/metasploit/metasploit_introduction.htm">Metasploit - Introduction</a></li>
<li><a href="/metasploit/metasploit_environment_setup.htm">Metasploit - Environment Setup</a></li>
<li><a href="/metasploit/metasploit_basic_commands.htm">Metasploit - Basic Commands</a></li>
<li><a href="/metasploit/metasploit_armitage_gui.htm">Metasploit - Armitage GUI</a></li>
<li><a href="/metasploit/metasploit_pro_console.htm">Metasploit - Pro Console</a></li>
<li><a href="/metasploit/metasploit_vulnerable_target.htm">Metasploit - Vulnerable Target</a></li>
<li><a href="/metasploit/metasploit_discovery_scans.htm">Metasploit - Discovery Scans</a></li>
<li><a href="/metasploit/metasploit_task_chains.htm">Metasploit - Task Chains</a></li>
<li><a href="/metasploit/metasploit_import_data.htm">Metasploit - Import Data</a></li>
<li><a href="/metasploit/metasploit_vulnerability_scan.htm">Metasploit - Vulnerability Scan</a></li>
<li><a href="/metasploit/metasploit_vulnerability_validation.htm">Metasploit - Vulnerability Validation</a></li>
<li><a href="/metasploit/metasploit_exploit.htm">Metasploit - Exploit</a></li>
<li><a href="/metasploit/metasploit_payload.htm">Metasploit - Payload</a></li>
<li><a href="/metasploit/metasploit_credential.htm">Metasploit - Credential</a></li>
<li><a href="/metasploit/metasploit_brute_force_attacks.htm">Metasploit - Brute-Force Attacks</a></li>
<li><a href="/metasploit/metasploit_pivoting.htm">Metasploit - Pivoting</a></li>
<li><a href="/metasploit/metasploit_maintaining_access.htm">Metasploit - Maintaining Access</a></li>
<li><a href="/metasploit/metasploit_metamodules.htm">Metasploit - MetaModules</a></li>
<li><a href="/metasploit/metasploit_social_engineering.htm">Metasploit - Social Engineering</a></li>
<li><a href="/metasploit/metasploit_export_data.htm">Metasploit - Export Data</a></li>
<li><a href="/metasploit/metasploit_reports.htm">Metasploit - Reports</a></li>
</ul>
<ul class="toc chapters">
<li class="heading">Metasploit Useful Resources</li>
<li><a href="/metasploit/metasploit_quick_guide.htm">Metasploit - Quick Guide</a></li>
<li><a href="/metasploit/metasploit_useful_resources.htm">Metasploit - Useful Resources</a></li>
<li><a href="/metasploit/metasploit_discussion.htm">Metasploit - Discussion</a></li>
</ul>


<ul class="toc reading">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="/upsc_ias_exams.htm">UPSC IAS Exams Notes</a></li>
<li><a target="_top" href="/developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="/questions_and_answers.htm">Questions and Answers</a></li>
<li><a target="_top" href="/effective_resume_writing.htm">Effective Resume Writing</a></li>
<li><a target="_top" href="/hr_interview_questions/index.htm">HR Interview Questions</a></li>
<li><a target="_top" href="/computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="/computer_whoiswho.htm">Who is Who</a></li>
</ul>
</div>
<!-- Tutorial ToC Ends Here -->
<!-- Tutorial Content Starts Here -->
<div class="mui-col-md-6 tutorial-content">
<h1>Metasploit - Quick Guide</h1>
<hr />
<div class="top-ad-heading">Advertisements</div>
<div style="text-align: center;">
<script><!--
google_ad_client = "pub-7133395778201029";
var width = document.getElementsByClassName("tutorial-content")[0].clientWidth - 40;
google_ad_width = width;
google_ad_height = 150;
google_ad_format = width + "x150_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="mui-container-fluid button-borders">
<div class="pre-btn">
<a href="/metasploit/metasploit_reports.htm"><i class="fal fa-chevron-circle-left"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="/metasploit/metasploit_useful_resources.htm">Next Page <i class="fal fa-chevron-circle-right"></i>&nbsp;</a>
</div>
</div>
<div class="clearer"></div>
<h1>Metasploit - Introduction</h1>
<p>Metasploit is one of the most powerful tools used for penetration testing. Most of its resources can be found at &minus; <a target="_blank" rel="nofollow" href="https://www.metasploit.com/">www.metasploit.com</a>. It comes in two versions: commercial and free edition. There are no major differences in the two versions, so in this tutorial, we will be mostly using the Community version (free) of Metasploit.</p>
<p>As an Ethical Hacker, you will be using “Kali Distribution” which has the Metasploit community version embedded in it along with other ethical hacking tools. But if you want to install Metasploit as a separate tool, you can easily do so on systems that run on Linux, Windows, or Mac OS X.</p>
<p>The hardware requirements to install Metasploit are &minus;</p>
<ul class="list">
<li>2 GHz &plus; processor</li>
<li>1 GB RAM available</li>
<li>1 GB &plus; available disk space</li>
</ul>
<p>Matasploit can be used either with command prompt or with Web UI.</p>
<p>The recommended OS versions for Metasploit are &minus;</p>
<ul class="list">
<li>Kali Linux 2.0 or Upper Versions</li>
<li>Backtrack 3 and Upper Versions</li>
<li>Red Hat Enterprise Linux Server 5.10&plus;</li>
<li>Red Hat Enterprise Linux Server 6.5&plus;</li>
<li>Red Hat Enterprise Linux Server 7.1&plus;</li>
<li>Ubuntu Linux 10.04 LTS</li>
<li>Ubuntu Linux 12.04 LTS</li>
<li>Ubuntu Linux 14.04 LTS</li>
<li>Windows Server 2008 R2</li>
<li>Windows Server 2012 R2</li>
<li>Windows 7</li>
<li>Windows 8.1</li>
</ul>
<h1>Metasploit - Environment Setup</h1>
<p>We will take the following actions to set up our test environment &minus;</p>
<ul class="list">
<li><p>We will download Virtual box and install it.</p></li>
<li><p>Download and install <b>Kali</b> distribution.</p></li>
<li><p>Download and install <b>Metasploitable</b> which will be our hacking machine.</p></li>
<li><p>Download and install Windows XP which will be another hacking machine.</p></li>
</ul>
<p>In total, we will have 3 machines which will be logically connected in the same network.</p>
<img src="/metasploit/images/three_machines.jpg" alt="Three Machines" />
<h2>Install Virtual Box</h2>
<p>To download Virtual Box, go to <a target="_blank" rel="nofollow" href="https://www.virtualbox.org/wiki/Downloads">www.virtualbox.org/wiki/Downloads</a></p>
<p>Select the appropriate version depending on your OS and the hardware configuration of your system.</p>
<img src="/metasploit/images/install_virtual_box.jpg" alt="Install Virtual Box" />
<p>After selecting the appropriate version of Virtual Box, the following screen will appear. Click <b>Next</b>.</p>
<img src="/metasploit/images/select_appropriate_version.jpg" alt="Select Appropriate Version" />
<p>On the next screen, set the location where you want to install the application.</p>
<img src="/metasploit/images/set_location.jpg" alt="Set Location" />
<p>You will get a Warning message before proceeding with the installation.</p>
<img src="/metasploit/images/warning_message.jpg" alt="Warning Message" />
<p>Click Yes on the above screen which will display the following screen. Click <b>Install</b> to begin the installation.</p>
<img src="/metasploit/images/click_install.jpg" alt="Click Install" />
<p>Once the installation is complete, you will get the following screen. Click Finish to exit the Setup Wizard.</p>
<img src="/metasploit/images/click_finish.jpg" alt="Click Finish" />
<p>Now, you will be greeted with the opening screen of VirtualBox.</p>
<img src="/metasploit/images/virtualbox_screen.jpg" alt="VirtualBox Screen" />
<p>Now we are ready to install the rest of the hosts for this tutorial.</p>
<h2>Install Kali Linux</h2>
<p>You can download Kali Linux from its official website &minus; <a target="_blank" rel="nofollow" href="https://www.kali.org/downloads/">www.kali.org/downloads/</a></p>
<img src="/metasploit/images/install_kali_linux.jpg" alt="Install Kali Linux" />
<p>Go to the official website and download prebuilt Kali Linux VirtualBox images.</p>
<p>Next, open VirtualBox Manager and go to Machine &rarr; New.</p>
<img src="/metasploit/images/open_virtualbox_manager.jpg" alt="Open VirtualBox Manager" />
<p>Go to the location where Kali Linux has been downloaded and choose a virtual hard disk file.</p>
<img src="/metasploit/images/kali_linux.jpg" alt="Kali Linux" />
<p>The next screen will prompt you to create a virtual machine. Click the <b>Create</b> button, as shown in the following screenshot.</p>
<img src="/metasploit/images/click_create_button.jpg" alt="Click Create Button" />
<p>Now, you can start Kali OS. Your default username will be <b>root</b> and your password will be <b>toor</b>.</p>
<img src="/metasploit/images/start_kali_os.jpg" alt="Start Kali OS" />
<h1>Metasploit - Basic Commands</h1>
<p>In this chapter, we will discuss some basic commands that are frequently used in Metasploit.</p>
<p>First of all, open the Metasploit console in Kali. You can do so by following the path: Applications &rarr; Exploitation Tools &rarr; Metasploit.</p>
<img src="/metasploit/images/metasploit_console.jpg" alt="Metasploit Console" />
<p>Once you open the Metasploit console, you will get to see the following screen. Highlighted in red underline is the version of Metasploit.</p>
<img src="/metasploit/images/metasploit_version.jpg" alt="Metasploit Version" />
<h2>Help Command</h2>
<p>If you type the <b>help</b> command on the console, it will show you a list of core commands in Metasploit along with their description.</p>
<img src="/metasploit/images/help_command.jpg" alt="Help Command" />
<h2>msfupdate Command</h2>
<p><b>msfupdate</b> is an important administration command. It is used to update Metasploit with the latest vulnerability exploits. After running this command, you will have to wait several minutes until the update completes.</p>
<img src="/metasploit/images/msfupdate_command.jpg" alt="msfupdate Command" />
<h2>Search Command</h2>
<p><b>Search</b> is a powerful command in Metasploit that you can use to find what you want to locate. For example, if you want to find exploits related to Microsoft, then the command will be &minus;</p>
<pre class="result notranslate">
msf &gt;search name:Microsoft type:exploit
</pre>
<p>Here, <b>search</b> is the command, <b>name</b> is the name of the object that you are looking for, and <b>type</b> is the kind of script you are searching.</p>
<img src="/metasploit/images/search_command.jpg" alt="Search Command" />
<h2>Info Command</h2>
<p>The <b>info</b> command provides information regarding a module or platform, such as where it is used, who is the author, vulnerability reference, and its payload restriction.</p>
<img src="/metasploit/images/info_command.jpg" alt="Info Command" />
<h1>Metasploit - Armitage GUI</h1>
<p>In this chapter, we will see how to use the <b>Armitage</b> GUI for Metasploit. Armitage is a complement tool for Metasploit. It visualizes targets, recommends exploits, and exposes the advanced post-exploitation features. Armitage is incorporated with Kali distribution. If you are required to do Penetration testing, then you will have to use both the tools together.</p>
<p>Let’s learn how to work with the Armitage GUI. At first, open the Metasploit console and go to Applications &rarr; Exploit Tools &rarr; Armitage.</p>
<img src="/metasploit/images/armitage_gui.jpg" alt="Armitage GUI" />
<p>Enter the required details on the next screen and click <b>Connect</b>.</p>
<img src="/metasploit/images/enter_required_details.jpg" alt="Enter Required Details" />
<p>Next, you will get to see the following screen.</p>
<img src="/metasploit/images/see_screen.jpg" alt="See Screen" />
<p>Armitage is very user friendly. Its GUI has three distinct areas: <b>Targets</b>, <b>Console</b>, and <b>Modules</b>.</p>
<ul class="list">
<li><p>The area <b>Targets</b> lists all the machines that you have discovered and those you are working with. The hacked targets have red color with a thunderstorm on it. After you have hacked a target, you can right-click on it and continue exploring with what you need to do, like exploring (browsing) the folders.</p></li>
<li><p>The area <b>Console</b> provides a view for the folders. Just by clicking on it, you can directly navigate to the folders without using any Metasploit commands.</p></li>
<li><p>The area <b>Modules</b> is the section that lists the module of vulnerabilities.</p></li>
</ul>
<h1>Metasploit - Pro Console</h1>
<p>Pro Console is a commercial console version of Metasploit. It is available for Linux, Microsoft OS, and OSX. Metasploit Pro can help penetration testers to &minus;</p>
<ul class="list">
<li><p>Leverage the Metasploit open source project and its leading exploit library</p></li>
<li><p>Manage data in large assessments</p></li>
<li><p>Control compromised machines and take over the network</p></li>
<li><p>Automatically generate reports containing key findings</p></li>
<li><p>Improve security by prioritizing exploitable vulnerabilities</p></li>
<li><p>Prove effectiveness of remediation or compensating controls to auditors</p></li>
<li><p>Get comprehensive visibility of user risks by integrating with Rapid7 UserInsight</p></li>
<li><p>Test the effectiveness of security controls</p></li>
<li><p>Simulate phishing campaigns for thousands of users</p></li>
</ul>
<p>Metasploit Pro offers a command prompt and a WEB UI.</p>
<p>To use Metasploit Pro, you need to purchase it from Rapid7 and install it on your system. In Windows environment, to launch Metasploit Pro, go to: Start &rarr; All Programs &rarr; Metasploit &rarr; Metasploit console.</p>
<img src="/metasploit/images/metasploit_pro.jpg" alt="Metasploit Pro" />
<p>If you are working in Linux environment, the open the command line terminal and type <b>sudo msfpro</b>.</p>
<img src="/metasploit/images/sudo_msfpro.jpg" alt="sudo msfpro" />
<h1>Metasploit - Vulnerable Target</h1>
<p>A vulnerable target is a machine or device with an unpatched security hole. It makes the host vulnerable, which is the target in this case.</p>
<p>For testing purpose, Rapid7 has created a VM machine with plenty of vulnerabilities. Keep in mind that you are not allowed to penetrate any device without permission. Hence, you need to download <b>metasploitable</b> which is a Linux machine.</p>
<p>Metasploitable can be downloaded from &minus; <a target="_blank" rel="nofollow" href="https://information.rapid7.com/metasploitable-download.html?LS=1631875&CS=web">www.information.rapid7.com/</a></p>
<img src="/metasploit/images/download_metasploitable.jpg" alt="Download Metasploitable" />
<p>Fill out the form to register yourself. Next, you will get the following screen with a direct link to download Metasploitable.</p>
<img src="/metasploit/images/register.jpg" alt="Register" />
<p>Next, open the VirtualBox Manager and go to Machine &rarr; New.</p>
<img src="/metasploit/images/virtualbox_manager.jpg" alt="VirtualBox Manager" />
<p>Click “Use an existing virtual hard disk file" and browse to the location where you have downloaded Metasploitable. Click <b>Open</b>.</p>
<img src="/metasploit/images/click_open.jpg" alt="Click Open" />
<p>On the next screen, click <b>Create</b>.</p>
<img src="/metasploit/images/click_create.jpg" alt="Click Create" />
<p>Now, you can login to Metasploitable using the default <b>username: msfadmin</b> and password: <b>msfadmin</b>.</p>
<img src="/metasploit/images/metasploitable_login.jpg" alt="Metasploitable Login" />
<h1>Metasploit - Discovery Scans</h1>
<p>The first phase of penetration involves scanning a network or a host to gather information and create an overview of the target machine.</p>
<p><b>Discovery Scan</b> is basically creating an IP list in the target network, discovering services running on the machines. To do this in Metasploit, we will use the command promp which are NMAP commands incorporated in Metasploit. For more information on NMAP and its commands, go to <a target="_blank" rel="nofollow" href="https://nmap.org/">https://nmap.org/</a></p>
<p>Now let’s see in practice how it exactly works. We started the target machine (Metasploitable) and the Windows Server 2003 machine with the IP <b>192.168.1.101</b>.</p>
<img src="/metasploit/images/metasploitable.jpg" alt="Metasploitable" />
<p>Next, we will start Metasploit. Here, we are using Kali Linux. Hence, the commands will always start with <b>nmap</b>.</p>
<p>Let’s start to scan the network with range 192.168.0.0/24 and discover the machines.</p>
<img src="/metasploit/images/discover_machines.jpg" alt="Discover Machines" />
<p>As can be seen in the above screenshot, there are 5 hosts up in the network with details. Now that we found the hosts that are alive, we will try to find the OS they are running on and their background services.</p>
<p>We will try to attack the vulnerable machine with the IP 192.168.1.101. To do so, we will run the following command &minus;</p>
<pre class="result notranslate">
Nmap –sV-O –T4 192.168.1.101
</pre>
Here,
<ul class="list"> 
<li><p>–<b>sV</b> parameter will detect the services with their version details.</p></li>
<li><p>–<b>O</b> is to detect the version of OS which in our case is Linux 2.6.X</p></li>
<li><p>–<b>T4</b> is the time that we let the scan to finish</p></li>
</ul>
<p>You will get the following screen as an output of using the above command.</p>
<img src="/metasploit/images/command_result.jpg" alt="Command Result" />
<h1>Metasploit - Task Chains</h1>
<p>Task Chains is a feature found in the Metasploit Pro version which helps us to schedule tasks and execute them. It is generally used for processes that run periodically, for example, network scanning.</p>
<p>To configure a task, let’s go to Tasks &rarr; Chains &rarr; New Task Chain.</p>
<img src="/metasploit/images/task_chains.jpg" alt="Task Chains" />
<p>Provide a name for the Task Chain.</p>
<img src="/metasploit/images/task_chain_name.jpg" alt="Task Chain Name" />
<p>Next, click the ‘&plus;’ sign, as shown in the following screenshot.</p>
<img src="/metasploit/images/click_plus_sign.jpg" alt="Click Plus Sign" />
<p>Select from the list the task that you want to select. Let us select SCAN.</p>
<img src="/metasploit/images/select_scan.jpg" alt="Select SCAN" />
<p>Next, the <b>configuration task setting</b> will appear as shown below.</p>
<img src="/metasploit/images/configuration_task_setting.jpg" alt="Configuration Task Setting" />
<p>Let’s add a task to the Task Chain which is the function that the server has to do after finishing the first task. To schedule the task, click the "Schedule Now" icon.</p>
<img src="/metasploit/images/schedule_task.jpg" alt="Schedule Task" />
<p>The following table will be displayed where you can select how often you want to run a task.</p>
<img src="/metasploit/images/run_task.jpg" alt="Run Task" />
<p>At the end, click the Save button to schedule the task chain.</p>
<img src="/metasploit/images/click_save_button.jpg" alt="Click Save Button" />
<h1>Metasploit - Import Data</h1>
<p>Metasploit is a powerful security framework which allows you to import scan results from other third-party tools. You can import NMAP scan results in XML format that you might have created earlier. Metasploit also allows you to import scan results from <b>Nessus</b>, which is a vulnerability scanner.</p>
<p>Let’s see how it works. At first, perform an NMAP scan and save the result in XML format on your desktop, as shown in the following screenshot.</p>
<img src="/metasploit/images/perform_nmap_scan.jpg" alt="Perform NMAP Scan" />
<p>Next, open Metasploit or Armitage to import the scan results. Thereafter, use the following command to import all the host.</p>
<pre class="result notranslate">
Msf &gt; db_import "path of xml file"  
</pre>
<p>The following screenshot shows what the output will look like.</p>
<img src="/metasploit/images/output.jpg" alt="Output" />
<p>To test whether the import file was correct or not, we can run specific commands on these two hosts and see how they respond. For example, in our case, we have listed all the hosts having the port 445 running on them.</p>
<img src="/metasploit/images/test_import_file.jpg" alt="Test Import File" />
<h1>Metasploit - Vulnerability Scan</h1>
<p>A vulnerability is a <b>system hole</b> that one can exploit to gain unauthorized access to sensitive data or inject malicious code. Metasploit, like all the others security applications, has a <b>vulnerability scanner</b> which is available in its commercial version.</p>
<p>With the help of a vulnerability scanner, you can do nearly all the jobs with one application. This facility is not there in the free version of Metasploit. If you are using a free version of Metasploit, then you will have to use Nessus Vulnerability Scanner and then import the results from there. Metasploit uses <b>Nexpose</b> to do the scan.</p>
<p>Let’s see how to scan with Nexpose in the Pro version of Metasploit.</p>
<p>First, add Nexpose console to Metasploit WEB UI. To do this, go to: Administration &rarr; Global Setting &rarr; Nexpose Console &rarr; Configure Nexpose Console.</p>
<img src="/metasploit/images/configure_nexpose_console.jpg" alt="Configure Nexpose Console" />
<p>Enter the IP of the server having Nexpose installed. Next, enter the port number, the username and the password. Select <b>enable</b>.</p>
<img src="/metasploit/images/select_enable.jpg" alt="Select Enable" />
<p>Next, click the Netexpose button &rarr; add the IP address of the host or network to be scanned &rarr; select scan template. It will initiate the scanning process.</p>
<img src="/metasploit/images/click_netexpose.jpg" alt="Click Netexpose" />
<p>To view the scan result, go to Analysis &rarr; Host.</p>
<h1>Metasploit - Vulnerability Validation</h1>
<p>In this chapter, we will learn how to validate the vulnerabilities that we have found from vulnerability scanners like Nexpose. This process is also known as <b>vulnerability analysis</b>.</p>
<p>As shown in the following screenshot, a vulnerability scanner can sometimes give you hundreds of vulnerabilities. In such a case, it can be quite time-consuming to validate each and every vulnerability.</p>
<img src="/metasploit/images/vulnerability_analysis.jpg" alt="Vulnerability Analysis" />
<p>Metasploit Pro has a feature called <b>Vulnerability Validation</b> to help you save time by validating the vulnerabilities automatically and give you an overview of the most crucial vulnerabilities that can be very harmful for your system. It also has an option to classify the vulnerabilities according to their severity.</p>
<p>Let’s see how you can use this option. Open Metasploit Pro Web Console &rarr; Project &rarr; Vulnerability Validation.</p>
<img src="/metasploit/images/vulnerability_validation.jpg" alt="Vulnerability Validation" />
<p>Next, enter the Project Name and provide an easy description about the project. Then, click the <b>Start</b> button.</p>
<img src="/metasploit/images/click_start_button.jpg" alt="Click Start Button" />
<p>Click "Pull from Nexpose". Select "Import existing Nexpose vulnerability data" as shown in the following screenshot.</p>
<img src="/metasploit/images/pull_from_nexpose.jpg" alt="Pull from Nexpose" />
<p>Click Tag &rarr; Automatically Tag by OS. It will separate the vulnerabilities for you.</p>
<img src="/metasploit/images/click_tag.jpg" alt="Click Tag" />
<p>Next, go to <b>Exploit &rarr; Sessions</b> and check the option "Clean up sessions when done". It means when the vulnerability will be checked, there will be interaction between the Metasploit machine and the vulnerable machine.</p>
<img src="/metasploit/images/check_vulnerability.jpg" alt="Check vulnerability" />
<p>Click <b>Generate Report &rarr; Start</b>.</p>
<img src="/metasploit/images/click_generate_report.jpg" alt="Click Generate Report" />
<p>Next, you will see a Validation Wizard. Here, you need to click the <b>Push validations</b> button.</p>
<img src="/metasploit/images/push_validations.jpg" alt="Push validations" />
<p>You will get the following screen after you have all the list of the vulnerabilities tested.</p>
<img src="/metasploit/images/vulnerabilities_tested.jpg" alt="Vulnerabilities Tested" />
<p>To see the results of the tested vulnerabilities, go to Home &rarr; Project Name &rarr; Vulnerabilities.</p>
<img src="/metasploit/images/vulnerabilities_result.jpg" alt="Vulnerabilities Result" />
<h1>Metasploit - Exploit</h1>
<p>After vulnerability scanning and vulnerability validation, we have to run and test some scripts (called <b>exploits</b>) in order to gain access to a machine and do what we are planning to do.</p>
<h2>Exploit using Armitage GUI</h2>
<p>We have several methods to use exploits. The first and foremost method is to use Armitage GUI which will connect with Metasploit to perform automated exploit testing called HAIL MARY. Let’s see how it works.</p>
<p>Open Kali distribution &rarr; Application &rarr; Exploit Tools &rarr; Armitage.</p>
<img src="/metasploit/images/open_kali.jpg" alt="Open Kali" />
<p>Next, go to <b>Attacks &rarr; Hail Mary</b> and click Yes.</p>
<img src="/metasploit/images/click_yes.jpg" alt="Click Yes" />
<p>You will see the following screen which would show all the exploits that are being tested.</p>
<img src="/metasploit/images/test_exploits.jpg" alt="Test Exploits" />
<p>Next, you will see the icon of the exploitable system (i.e., the system on which the exploit worked) will turn red in color with a thunderstorm pattern over it. At the console, you will see which exploit was successful, with its respective session ID.</p>
<img src="/metasploit/images/exploitable_system.jpg" alt="Exploitable System" />
<p>Now you can interact with the machine.</p>
<h2>Exploit using Command Prompt</h2>
<p>The second way (and probably a little professional way) to use an Exploit is by the Command Prompt.</p>
<p>From the Vulnerability Scanner, we found that the Linux machine that we have for test is vulnerable to FTP service. Now we will use an <b>exploit</b> that can work for us. The command is &minus;</p>
<pre class="result notranslate">
msf &gt; use “exploit path”  
</pre>
<p></p>
<img src="/metasploit/images/exploit.jpg" alt="Exploit" />
<p>Next, use the following command in order to see what parameters you have to set to make it functional.</p>
<pre class="result notranslate">
msf &gt; show options
</pre>
<p>This exploit shows that we have to set RHOST “target IP”</p>
<img src="/metasploit/images/target_ip.jpg" alt="Target IP" />
<p>Next, use the commands &minus;</p>
<pre class="result notranslate">
msf &gt; set RHOST 192.168.1.101   
msf &gt; set RPORT 21
</pre>
<p></p>
<img src="/metasploit/images/use_commands.jpg" alt="Use Commands" />
<p>Next, use the command &minus;</p>
<pre class="result notranslate">
msf &gt; run
</pre>
<p>If the exploit is successful, then you will see one session opened, as shown in the following screenshot.</p>
<img src="/metasploit/images/exploit_successful.jpg" alt="Exploit Successful" />
<p>Now, you can interact with this system.</p>
<h1>Metasploit - Payload</h1>
<p>Payload, in simple terms, are simple scripts that the hackers utilize to interact with a hacked system. Using payloads, they can transfer data to a victim system.</p>
<p>Metasploit payloads can be of three types &minus;</p>
<ul class="list">
<li><p><b>Singles</b> &minus; Singles are very small and designed to create some kind of communication, then move to the next stage. For example, just creating a user.</p></li>
<li><p><b>Staged</b> &minus; It is a payload that an attacker can use to upload a bigger file onto a victim system.</p></li>
<li><p><b>Stages</b> &minus; Stages are payload components that are downloaded by Stagers modules. The various payload stages provide advanced features with no size limits such as Meterpreter and VNC Injection.</p></li>
</ul>
<h2>Example</h2>
<p>Let’s take an example to understand the use of Metasploit payloads. Assume we have a Windows Server 2003 machine which is vulnerable to DCOM MS03-026.</p>
<p>At first, we will search for an <b>exploit</b> that can work with this vulnerability. We will use the exploit with the best <b>RANK</b>.</p>
<img src="/metasploit/images/rank.jpg" alt="RANK" />
<p>Next, we will use the following command to see what payload we can use with this exploit.</p>
<pre class="result notranslate">
msf &gt; show payloads
</pre>
<p>and see I can use payloads that will help me to upload /execute files, to make the victim as a VNC server to have a view.</p>
<img src="/metasploit/images/vnc_server.jpg" alt="VNC Server" />
<p>The above command will show the payloads that will help us upload/execute files onto a victim system.</p>
<img src="/metasploit/images/upload_execute_files.jpg" alt="Upload/Execute Files" />
<p>To set the payload that we want, we will use the following command &minus;</p>
<pre class="result notranslate">
set PAYLOAD payload/path
</pre>
<p>Set the listen host and listen port (LHOST, LPORT) which are the <b>attacker IP</b> and <b>port</b>. Then set remote host and port (RPORT, LHOST) which are the <b>victim IP</b> and <b>port</b>.</p>
<img src="/metasploit/images/attacker_ip.jpg" alt="Attacker IP" />
<p>Type “exploit”. It will create a session as shown below &minus;</p>
<img src="/metasploit/images/type_exploit.jpg" alt="Type Exploit" />
<p>Now we can play with the machine according to the settings that this payload offers.</p>
<h1>Metasploit - Credential</h1>
<p>After gaining access to a machine, it is important to take all the sensitive information such as usernames and passwords. You can perform this operation for auditing purpose as well, to analyze if the systems in your organization are using strong passwords or not.</p>
<p>In Windows, the passwords are stored in an encrypted form which are called <b>NTLM hash</b>. In Windows OS, you should always look for the user having the number 500, which signifies that the user is a <b>superuser</b>.</p>
<img src="/metasploit/images/superuser.jpg" alt="Superuser" />
<p>In the free version of Metasploit, hash credentials have to be saved in a text file or in the Metasploit database.</p>
<h2>Example</h2>
<p>Let’s use the scenario that we have used in the previous chapter. Assume we have a Windows Server 2003 machine which is vulnerable to DCOM MS03-026. We gained access to this system and inserted the <b>meterpreter</b> payload.</p>
<p>The command generally used in meterpreter is <b>hashdump</b> which will list all the usernames and the passwords.</p>
<img src="/metasploit/images/hashdump.jpg" alt="Hashdump" />
<p>You can also use <b>Armitage</b> to retrieve this information, as shown in the following screenshot.</p>
<img src="/metasploit/images/use_armitage.jpg" alt="Use Armitage" />
<p>The commercial edition Metasploit has a separate session called <b>Credential</b> which allows to collect, store, and reuse the credentials. Let’s see how to go about it.</p>
<p>To collect sensitive data, first go to: Home &rarr; Project Name &rarr; Sessions.</p>
<img src="/metasploit/images/credential.jpg" alt="Credential" />
<p>Click on the active session.</p>
<img src="/metasploit/images/click_active_session.jpg" alt="Click Active Session" />
<p>Next, click <b>Collect System Data</b>. It will collect all the HASH and passwords.</p>
<img src="/metasploit/images/collect_system_data.jpg" alt="Collect System Data" />
<p>You will get to see a screen as follows &minus;</p>
<img src="/metasploit/images/screen.jpg" alt="Screen" />
<p>To see the collected credentials, go to Home &rarr; Project Name &rarr; Credentials &rarr; Manage.</p>
<img src="/metasploit/images/manage.jpg" alt="Manage" />
<p>As shown in the following screenshot, you will see all the passwords gained and those that could be cracked.</p>
<img src="/metasploit/images/passwords.jpg" alt="Passwords" />
<h1>Metasploit - Brute-Force Attacks</h1>
<p>In a brute-force attack, the hacker uses all possible combinations of letters, numbers, special characters, and small and capital letters in an automated way to gain access over a host or a service. This type of attack has a high probability of success, but it requires an enormous amount of time to process all the combinations.</p>
<p>A brute-force attack is slow and the hacker might require a system with high processing power to perform all those permutations and combinations faster. In this chapter, we will discuss how to perform a brute-force attack using Metasploit.</p>
<p>After scanning the Metasploitable machine with NMAP, we know what services are running on it. The services are FTP, SSH, mysql, http, and Telnet.</p>
<img src="/metasploit/images/services_running.jpg" alt="Services Running" />
<p>To perform a brute-force attack on these services, we will use <b>auxiliaries</b> of each service. Auxiliaries are small scripts used in Metasploit which don’t create a shell in the victim machine; they just provide access to the machine if the brute-force attack is successful. Let’s see how to use auxiliaries.</p>
<p>Here, we have created a dictionary list at the root of Kali distribution machine.</p>
<img src="/metasploit/images/dictionary_list.jpg" alt="Dictionary List" />
<h2>Attack the FTP Service</h2>
<p>Open Metasploit. The first service that we will try to attack is FTP and the auxiliary that helps us for this purpose is <b>auxiliary/scanner/ftp/ftp_login</b>.</p>
<p>Type the following command to use this auxiliary &minus;</p>
<pre class="result notranslate">
msf &gt; use auxiliary/scanner/ftp/ftp_login
</pre>
<p></p>
<img src="/metasploit/images/auxiliary.jpg" alt="Auxiliary" />
<p>Set the path of the file that contains our dictionary.</p>
<img src="/metasploit/images/set_path.jpg" alt="Set Path" />
<p>Set the victim IP and run.</p>
<img src="/metasploit/images/run_victim_ip.jpg" alt="Run Victim IP" />
<p>It will produce the following output &minus;</p>
<img src="/metasploit/images/victim_ip_output.jpg" alt="Victim IP Output" />
<p>As you can see, it is completed, but no session has been created. It means we were unsuccessful in retrieving any useful username and password.</p>
<h2>Attack the SSH Service</h2>
<p>To attack the SSH service, we can use the auxiliary: <b>auxiliary/scanner/ssh/ssh_login</b></p>
<p>As you can see in the following screenshot, we have set the RHOSTS to 192.168.1.101 (that is the victim IP) and the username list and password (that is userpass.txt). Then we apply the <b>run</b> command.</p>
<img src="/metasploit/images/apply_run_command.jpg" alt="Apply Run Command" />
<p>As can be seen in the above screenshot, three sessions were created. It means three combinations were successful. We have underlined the usernames.</p>
<p>To interact with one of the three sessions, we use the command <b>msf &gt; sessions –i 3</b> which means we will connect with session number 3.</p>
<img src="/metasploit/images/interact_sessions.jpg" alt="Interact Sessions" />
<h2>Attack the Telnet Service</h2>
<p>The apply a brute-force attack on a Telnet service, we will take a provided set of credentials and a range of IP addresses and attempt to login to any Telnet servers. For this, we will use the auxiliary: <b>auxiliary/scanner/telnet/telnet_login</b>.</p>
<p>The process of using the auxiliary is same as in the case of attacking an FTP service or an SSH service. We have to use the auxiliary, set RHOST, then set the list of passwords and run it.</p>
<p>Take a look at the following screenshot. Highlighted in blue arrow are the incorrect attempts that the auxiliary did. The red arrows show the successful logins that created sessions.</p>
<img src="/metasploit/images/created_sessions.jpg" alt="Created Sessions" />
<p>Some other auxiliaries that you can apply in brute-force attack are &minus;</p>
<ul class="list">
<li><p><b>SMB service</b> &minus; auxiliary/scanner/smb/smb_login</p></li>
<li><p><b>SNMP service</b> &minus; auxiliary/scanner/snmp/snmp_login</p></li>
</ul>
<h1>Metasploit - Pivoting</h1>
<p>Pivoting is a technique that Metasploit uses to route the traffic from a hacked computer toward other networks that are not accessible by a hacker machine.</p>
<p>Let’s take a scenario to understand how Pivoting works. Assume we have two networks &minus;</p>
<ul class="list">
<li><p>A network with the range 192.168.1.0/24 where the hacker machine has access, and</p></li>
<li><p>Another network with the range 10.10.10.0/24. It is an internal network and the hacker doesn’t have access to it.</p></li>
</ul>
<p>The hacker will try to hack the second network this machine that has access in both networks to exploit and hack other internal machines.</p>
<p>In this scenario, a hacker will first break into the first network and then use it as a staging point to exploit and hack the internal machines of the second network. This process is known as <b>pivoting</b> because the hacker is using the first network as a pivot to get access into the second network.</p>
<img src="/metasploit/images/pivoting.jpg" alt="Pivoting" />
<p>Let’s try to understand how it works. We will take a Windows Server 2003 system with DCOM vulnerability and we will use this vulnerability to hack this system.</p>
<img src="/metasploit/images/dcom_vulnerability.jpg" alt="DCOM Vulnerability" />
<p>The exploit for this will be <b>ms03_026_dcom</b> and we will use <b>meterpreter</b> payload.</p>
<img src="/metasploit/images/meterpreter.jpg" alt="Meterpreter" />
<p>Now that we gained access to this system, let’s interact with the session with the command <b>session -i 1</b> where "1" is the number of the session that was created.</p>
<img src="/metasploit/images/session.jpg" alt="Session" />
<p>Now, let’s use the command <b>ipconfig</b> to find out if this host has access to other networks. The following screenshot shows the output. You can observe that this host is connected with two other networks &minus;</p>
<ul class="list">
<li>one is a loopback network which is of no use, and</li>
<li>the other network is 10.10.10.0/24 which we will explore.</li>
</ul>
<img src="/metasploit/images/ipconfig.jpg" alt="IPConfig" />
<p>Metasploit has an AutoRoute meterpreter script that will allow us to attack this second network through our first compromised machine, but first, we have to <b>background</b> the session.</p>
<img src="/metasploit/images/background.jpg" alt="Background" />
<p>Adding route toward the internal network with range 10.10.10.0/24</p>
<img src="/metasploit/images/adding_route.jpg" alt="Adding Route" />
<p>Now that we have route the traffic (Pivot), we can try to scan the host found in this network.</p>
<img src="/metasploit/images/pivot.jpg" alt="Pivot" />
<p>We did a port scan on host 10.10.10.102. The following screenshot shows the result.</p>
<img src="/metasploit/images/port_scan.jpg" alt="Port Scan" />
<p>Now we have gained access to the internal network. However, if you lose the session of the hacked machine, you will lose access to the internal network too.</p>
<h1>Metasploit - Maintaining Access</h1>
<p>In this chapter, we will discuss how to maintain access in a system that we have gained access to. It is important because if we don’t maintain access, then we will have to try to exploit it from the beginning in case the hacked system is closed or patched.</p>
<p>The best way is to install a <b>backdoor</b>. For the hacked machine Windows Server 2003 that we exploited in the previous chapter, we set the payload of <b>meterpreter</b> and this payload has a backdoor option called <b>metsvc</b>. We can use this backdoor option to get access to the victim machine whenever we want, but this backdoor comes with a risk that everyone can connect to this session without authentication.</p>
<p>Let us understand in detail how it works in practice. We are at a stage where we have exploited the Windows Server 2003 machine and we have set <b>meterpreter</b> payload. Now we want to see the processes that are running on this machine and hide our process behind a genuine process.</p>
<p>Type "ps" in meterpreter session to see the victim processes.</p>
<img src="/metasploit/images/meterpreter_session.jpg" alt="Meterpreter Session" />
<p>We like to hide our process behind <b>explorer.exe</b> because it is a process that runs at startup and it is always present. To do this, use the command: "migrate PID number" as shown in the following screenshot.</p>
<img src="/metasploit/images/migrate_pid_number.jpg" alt="Migrate PID Number" />
<p>To install backdoor, type <b>run metsvc</b>. While running, you will see the port that was created and the directory where the files are being uploaded.</p>
<img src="/metasploit/images/run_metsvc.jpg" alt="Run Metsvc" />
<p>To connect with this backdoor, we need <b>multi/handler</b> with a payload of <b>windows/metsvc_bind_tcp</b>.</p>
<img src="/metasploit/images/connect.jpg" alt="Connect" />
<h2>Metasploit &minus; Privilege Escalation</h2>
<p>After we have exploited and gained access to a victim system, the next step is to get its administrator rights or root permission. Once we get this privilege, then it becomes very simple to install, delete, or edit any file or process.</p>
<p>Let’s carry on with the same scenario where we have hacked a Windows Server 2003 system and put the payload <b>meterpreter</b>.</p>
<p>Meterpreter uses the "getsystem" command to escalate privileges. But first, we have to use the "priv" command to prepare the hacked system for privilege escalation.</p>
<p>Next, run the "getsystem" command.</p>
<img src="/metasploit/images/run_getsystem.jpg" alt="Run getsystem" />
<p>As you can see, we have actually logged in as an administrator.</p>
<h1>Metasploit - MetaModules</h1>
<p>MetaModules are complex and automated security tasks, designed to help security departments to do their job more efficiently, like testing firewall ports which are open and closed, testing default credentials, etc.</p>
<p>MetaModules are new features that are introduced in Metasploit Pro (the commercial version). You should keep in mind that the MetaModules with best rating of stars will you provide the best results.</p>
<p>To open MetaModules, go to Home &rarr; Project Name &rarr; Modules &rarr; MetaModules.</p>
<img src="/metasploit/images/go_to_home.jpg" alt="go to Home" />
<p>As you can see, we have six metamodules to serve different requirements.</p>
<img src="/metasploit/images/six_metamodules.jpg" alt="Six MetaModules" />
<h2>Segmentation and Firewall testing</h2>
<p>This MetaModule runs a full Nmap SYN scan against an external server hosted by Rapid7 that acts as an egress scan target. Use this MetaModule to discover outbound ports on a firewall that an attacker can use to filter information. You will need to specify the ports and protocols that you want to audit.</p>
<p>To run this MetaModule, click the <b>Launch</b> button and follow the instructions in there. It will show you a report of open, closed, and filtered ports, just as shown in the following screenshot.</p>
<img src="/metasploit/images/segmentation_testing.jpg" alt="Segmentation Testing" />
<h2>Credentials Domino</h2>
<p>This MetaModule uses a valid login or an active session to perform an iterative credentials attack that collects credentials from compromised hosts. It reuses collected credentials to identify other possible attack routes. This MetaModule runs until it tries all credentials or reaches a termination condition.</p>
<p>To run this MetaModule, click the <b>Launch</b> button on the opening screen. It will produce the following screenshot wherein you have to choose the HOST IP and the Login credentials to be tested.</p>
<img src="/metasploit/images/credentials_domino.jpg" alt="Credential Domino" />
<p>If the credentials that you have entered is correct, then it will produce the following result.</p>
<img src="/metasploit/images/credentials.jpg" alt="Credentials" />
<h2>SSH Key Testing</h2>
<p>This MetaModule attempts to log in to systems with a recovered SSH key. It records the success and failure results for each service. You will need to specify the user name, the SSH key filename, and the range of hosts that you want.</p>
<p>To run this MetaModule, click <b>Launch</b> on the opening screen. It will display the following screen.</p>
<img src="/metasploit/images/ssh_key_testing.jpg" alt="SSH Key Testing" />
<p>Enter <b>Credentials</b> and click the <b>Launch</b> button.</p>
<img src="/metasploit/images/enter_credentials.jpg" alt="Enter Credentials" />
<h2>Passive Network Discovery</h2>
<p>This MetaModule is designed to sniff traffic to discover hosts and services on a local network. Since it does not send any packets, you can run this app to conduct a stealthy network discovery scan and identify any hosts, services, and clear-text credentials.</p>
<p>To run this MetaModule, click the <b>Launch</b> button on the opening screen. It will display the following screen.</p>
<img src="/metasploit/images/passive_network_discovery.jpg" alt="Passive Network Discovery" />
<p>Select the <b>Network interface</b> (Generally they are automatically discovered). Click <b>Filters</b>. Thereafter, check all the protocols that you want to monitor. In this case, we checked only HTTP.</p>
<img src="/metasploit/images/network_interface.jpg" alt="Network Interface" />
<p>You will get the following screen with captured data and packets. If any IP or credential is found, it will also be displayed.</p>
<img src="/metasploit/images/ip.jpg" alt="IP" />
<h1>Metasploit - Social Engineering</h1>
<p>Social engineering can be broadly defined as a process of extracting sensitive information (such as usernames and passwords) by trick. Hackers sometimes use fake websites and phishing attacks for this purpose. Let us try to understand the concept of Social Engineering attacks through some examples.</p>
<h3>Example 1</h3>
<p>You must have noticed old company documents being thrown into dustbins as garbage. These documents might contain sensitive information such as Names, Phone Numbers, Account Numbers, Social Security Numbers, Addresses, etc. Many companies still use carbon paper in their fax machines and once the roll is over, its carbon goes into dustbin which may have traces of sensitive data. Although it sounds improbable, but attackers can easily retrieve information from the company dumpsters by pilfering through the garbage.</p>
<h3>Example 2</h3>
<p>An attacker may befriend a company personnel and establish good relationship with him over a period of time. This relationship can be established online through social networks, chatting rooms, or offline at a coffee table, in a playground, or through any other means. The attacker takes the office personnel in confidence and finally digs out the required sensitive information without giving a clue.</p>
<h3>Example 3</h3>
<p>A social engineer may pretend to be an employee or a valid user or an VIP by faking an identification card or simply by convincing employees of his position in the company. Such an attacker can gain physical access to restricted areas, thus providing further opportunities for attacks.</p>
<h3>Example 4</h3>
<p>It happens in most of the cases that an attacker might be around you and can do <b>shoulder surfing</b> while you are typing sensitive information like user ID and password, account PIN, etc.</p>
<h2>Social Engineering Attack in Metasploit</h2>
<p>In this section, we will discuss how you can initiate a Social Engineering attack using Metasploit.</p>
<p>First of all, go to the Home page of Metasploit and click <b>Phishing Campaign</b>, as shown in the following screenshot.</p>
<img src="/metasploit/images/phishing_campaign.jpg" alt="Phishing Campaign" />
<p>Enter the name of the project and click Next.</p>
<img src="/metasploit/images/project.jpg" alt="Project" />
<p>Enter the name of the campaign. In our case, it is <b>Lab</b>. Next, click the <b>E-mail</b> icon under <b>Campaign Components</b>.</p>
<img src="/metasploit/images/campaign_components.jpg" alt="Campaign Components" />
<p>On the next screen, you need to supply the requested data according to your campaign.</p>
<img src="/metasploit/images/supply.jpg" alt="Supply" />
<p>Next, click the <b>Content</b> icon (number 2) if you want to change anything in the content of the email. After changing the content, click <b>Save</b>.</p>
<img src="/metasploit/images/content_icon.jpg" alt="Content Icon" />
<p>Next, click the <b>Landing Page</b> icon to set the URLs where you want to redirect your tricked users.</p>
<img src="/metasploit/images/landing_page.jpg" alt="Landing Page" />
<p>As shown in the following screenshot, enter the URL at <b>Path</b> and click <b>Next</b>.</p>
<img src="/metasploit/images/path.jpg" alt="Path" />
<p>On the next screen, click the button <b>Clone Website</b> which will open another window. Here, you need to enter the website that you want to clone. As you can see in the following screenshot, we entered <b>tutorialpoint.com</b> in this field. Next, click the <b>Clone</b> button and save your changes.</p>
<img src="/metasploit/images/clone_website.jpg" alt="Clone Website" />
<p>Next, click the <b>Redirect Page</b> button.</p>
<img src="/metasploit/images/redirect_page.jpg" alt="Redirect Page" />
<p>Click <b>Next</b> and you will get to see the following screen.</p>
<img src="/metasploit/images/click_next.jpg" alt="Click Next" />
<p>You can click the <b>Clone Website</b> button to clone the redirected website again.</p>
<img src="/metasploit/images/website.jpg" alt="Website" />
<p>Next, in the <b>Server Configuration</b> section, click the <b>E-mail Server</b> button.</p>
<img src="/metasploit/images/server_configuration.jpg" alt="Server Configuration" />
<p>On the next screen, enter <b>mailserver settings</b> that will be used as a relay to send this phishing email. Then, click <b>Save</b>.</p>
<img src="/metasploit/images/mailserver_settings.jpg" alt="Mailserver Settings" />
<p>In the <b>Notifications</b> section, there is an option to <b>Notify others before launching the campaign</b>. You can choose to use this option to notify others. Then, click <b>Save</b>.</p>
<img src="/metasploit/images/notification.jpg" alt="Notification" />
<p>Next, you will see a new window. Here, you need to click the <b>Start</b> button to initiate the process of sending phishing mails.</p>
<img src="/metasploit/images/start_button.jpg" alt="Start Button" />
<p>Metasploit has options to generate a statistical report of your phishing campaign. It will appear as shown in the following screenshot.</p>
<img src="/metasploit/images/statistical_report.jpg" alt="Statistical Report" />
<h1>Metasploit - Export Data</h1>
<p>In this chapter, we will see how to export data which, in a way, is a backup of your projects. Later on, you can import this backup to another Metasploit project.</p>
<p>This feature "Export Data" is available in both the free version as well as the commercial version of Metasploit.</p>
<p>If you want to export data from Metasploit Pro, then it will store a copy of the file in the location "/path/to/Metasploit/apps/pro/exports".</p>
<img src="/metasploit/images/export_data.jpg" alt="Export Data" />
<p>The files that are stored in this directory will match the list of exports displayed in the web interface. You can find and view the export log in the following directory: "/path/to/Metasploit/apps/pro/ui/log". The export log is named "exports.log".</p>
<img src="/metasploit/images/view_export_log.jpg" alt="View Export Log" />
<p>To clear the export log, you will need to remove it from the log directory, which is located at "/path/to/Metasploit/apps/pro/ui/log".</p>
<h2>Exporting Data in Metasploit Pro</h2>
<p>To export data, <b>go to Home &rarr; Project Name &rarr; Exports &rarr; Export Data</b>.</p>
<img src="/metasploit/images/exporting_data.jpg" alt="Exporting Data" />
<p>On the next screen, you can choose the <b>file format</b> in which you want to store the export data.</p>
<ul class="list">
<li><p><b>PWDump</b> &minus; A text file that contains all of the credentials for a project, including plaintext passwords, SMB hashes, and SSH keys. Credentials can be masked to enumerate user names only.</p></li>
<li><p><b>Replay script</b> &minus; A batch file that reruns tasks that opened sessions on target hosts. A replay script consists of multiple resource files (.rc).</p></li>
<li><p><b>XML</b> &minus; An XML file that contains the attributes for most of the objects in a project and can be imported into another project.</p></li>
<li><p><b>ZIP Workplace</b> &minus; A zip that contains an XML export and any loot files, report files, and tasks logs.</p></li>
</ul>
<img src="/metasploit/images/file_format.jpg" alt="File Format" />
<p>At <b>Export Type</b>, enter a file name for the export data. Next, at <b>Address Settings</b>, enter the IP of the hosts.</p>
<p>Next, in the <b>Options</b> section, you can choose to hide your credentials by clicking on the checkbox <b>Mask Credentials</b>. Then, click the button <b>Export Data</b>.</p>
<img src="/metasploit/images/export_type.jpg" alt="Export Type" />
<p>The following screen will be displayed where you can see the exported file.</p>
<img src="/metasploit/images/exported_file.jpg" alt="Exported File" />
<p>Click <b>Download</b> to retrieve the exported file.</p>
<img src="/metasploit/images/click_download.jpg" alt="Click Download" />
<h1>Metasploit - Reports</h1>
<p>Metasploit has in-built options that you can use to generate reports to summarize all your activities and findings. In this chapter, we will discuss how you can generate reports in Metasploit.</p>
<p>To create reports in Metasploit, follow the steps given below &minus;</p>
<p><b>Step 1</b> &minus; Go to Home &rarr; Reports &rarr; New Report.</p>
<p><b>Step 2</b> &minus; Select a Report Type according to your needs. If you click the "?" icon, it will show you information on every type of report.</p>
<p><b>Step 3</b> &minus; In the <b>Name</b> field, provide a file name.</p>
<p><b>Step 4</b> &minus; In the <b>Sections</b> field, check the options as per your requirement.</p>
<img src="/metasploit/images/sections.jpg" alt="Sections" />
<p><b>Step 5</b> &minus; Similarly, in the Options field, check the options as per your requirement.</p>
<p><b>Step 6</b> &minus; In the <b>Email Report</b> section, you can enter the email IDs of the recipients to whom you would like to mail the report directly.</p>
<p><b>Step 7</b> &minus; Next, click the <b>Generate Report</b> button.</p>
<img src="/metasploit/images/generate_report.jpg" alt="Generate Report" />
<p>Your report is now generated. Next, to we all your reports, go to <b>Reports &rarr; Show Reports</b>.</p>
<img src="/metasploit/images/show_reports.jpg" alt="Show Reports" />
<p>You can view your reports by clicking <b>View</b> under <b>Actions</b>.</p>
<img src="/metasploit/images/click_view.jpg" alt="Click View" />
<div class="mui-container-fluid button-borders show">
<div class="pre-btn">
<a href="/metasploit/metasploit_reports.htm"><i class="fal fa-chevron-circle-left"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="/metasploit/metasploit_useful_resources.htm">Next Page <i class="fal fa-chevron-circle-right"></i>&nbsp;</a>
</div>
</div>
<div class="google-bottom-ads">
<div>Advertisements</div>
<script><!--
var width = 580;
var height = 400;
var format = "580x400_as";
if( window.innerWidth < 468 ){
   width = 300;
   height = 250;
   format = "300x250_as";
}
google_ad_client = "pub-7133395778201029";
google_ad_width = width;
google_ad_height = height;
google_ad_format = format;
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<div class="space-bottom"></div>
</div>
</div>
<!-- Tutorial Content Ends Here -->
<!-- Right Column Starts Here -->
<div class="mui-col-md-2 google-right-ads">
<div class="space-top"></div>
<div class="google-right-ad" style="margin: 0px auto !important;margin-top:5px;">
<script><!--
google_ad_client = "pub-2537027957187252";
google_ad_width = 300;
google_ad_height = 250;
google_ad_format = "300x250_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="google-right-ad">
<div class="adsbyvli" data-ad-slot="vi_9012177"></div>
<script>(vitag.Init = window.vitag.Init || []).push(function(){viAPItag.display("vi_9012177")})</script>
</div>
<div class="space-bottom"></div>
<div class="google-right-ad">
<div class="adsbyvli" data-ad-slot="vi_9013289"></div>
<script>(vitag.Init = window.vitag.Init || []).push(function(){viAPItag.display("vi_9013289")})</script>
</div>
<div class="space-bottom" style="margin-bottom:15px;"></div>
</div>
<!-- Right Column Ends Here -->
</div>
</div>
<div class="clear"></div>
<footer id="footer">
<div class="mui--text-center">
<div class="mui--text-caption mui--text-light">
<a href="/index.htm" class="logo"><img class="img-responsive" src="/images/logo-black.png" alt="Tutorials Point" title="Tutorials Point"></a>
</div>
<ul class="mui-list--inline mui--text-body2 mui--text-light">
<li><a href="/about/index.htm"><i class="fal fa-globe"></i> About us</a></li>
<li><a href="/about/about_terms_of_use.htm"><i class="fal fa-asterisk"></i> Terms of use</a></li>
<li><a href="/about/about_privacy.htm#cookies"> <i class="fal fa-shield-check"></i> Cookies Policy</a></li>
<li><a href="/about/faq.htm"><i class="fal fa-question-circle"></i> FAQ's</a></li>
<li><a href="/about/about_helping.htm"><i class="fal fa-hands-helping"></i> Helping</a></li>
<li><a href="/about/contact_us.htm"><i class="fal fa-map-marker-alt"></i> Contact</a></li>
</ul>
<div class="mui--text-caption mui--text-light bottom-copyright-text">&copy; Copyright 2019. All Rights Reserved.</div>
</div>
<div id="privacy-banner">
  <div>
    <p>
      We use cookies to provide and improve our services. By using our site, you consent to our Cookies Policy.
      <a id="banner-accept" href="#">Accept</a>
      <a id="banner-learn" href="/about/about_cookies.htm" target="_blank">Learn more</a>
    </p>
  </div>
</div>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-232293-17"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-232293-6');
</script>
</footer>
</body>
</html>
