<!DOCTYPE html>
<html lang="en-US">
<head>
<title>Apache Camel - Quick Guide - Tutorialspoint</title>
<meta charset="utf-8">
<meta name="description" content="Apache Camel - Quick Guide - Consider a situation where a large online grocery store in your town such as the Bigbasket in India invites you to design an IT solution for them. The stable an"/>
<meta name="keywords" content="C, C++, Python, Java, HTML, CSS, JavaScript, SQL, PHP, jQuery, XML, DOM, Bootstrap, Tutorials, Articles, Programming, training, learning, quiz, preferences, examples, code"/>
<link rel="canonical" href="https://www.tutorialspoint.com/apache_camel/apache_camel_quick_guide.htm" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes">
<script src="/theme/js/script-min-v2.js?v=3"></script>
<link rel="stylesheet" href="/theme/css/style-min-v2.css?v=6">
<script src="//services.bilsyndication.com/adv1/?d=901" defer="" async=""></script>
<script> var vitag = vitag || {};</script>
<script> vitag.outStreamConfig = { enablePC: false, enableMobile: false };</script>  
<style>
.right-menu .mui-btn {
    background-color:#711141;
}
a.demo {
    background:#711141;
}
li.heading {
    background:#711141;
}
.course-box{background:#711141}
.home-intro-sub p{color:#711141}
</style>
</head>
<body>
<header id="header">
<!-- Top sub-menu Starts Here -->
<div class="mui-appbar mui-container-fulid top-menu">
<div class="mui-container">
<div class="top-menu-item home">
<a href="https://www.tutorialspoint.com/index.htm" target="_blank" title="TutorialsPoint - Home"><i class="fal fa-home"></i> <span>Home</span></a>
</div>
<div class="top-menu-item qa">
<a href="https://www.tutorialspoint.com/about/about_careers.htm" target="_blank" title="Job @ Tutorials Point"><i class="fa fa-suitcase"></i> <span>Jobs</span></a>
</div>
<div class="top-menu-item tools">
<a href="https://www.tutorialspoint.com/online_dev_tools.htm" target="_blank" title="Tools - Online Development and Testing Tools"><i class="fal fa-cogs"></i> <span>Tools</span></a>
</div>
<div class="top-menu-item coding-ground">
<a href="https://www.tutorialspoint.com/codingground.htm" target="_blank" title="Coding Ground - Free Online IDE and Terminal"><i class="fal fa-code"></i> <span>Coding Ground </span></a> 
</div>
<div class="top-menu-item current-affairs">
<a href="https://www.tutorialspoint.com/current_affairs.htm" target="_blank" title="Daily Current Affairs"><i class="fal fa-layer-plus"></i> <span>Current Affairs</span></a>
</div>
<div class="top-menu-item upsc-notes">
<a href="https://www.tutorialspoint.com/upsc_ias_exams.htm" target="_blank" title="UPSC IAS Exams Notes - TutorialsPoint"><i class="fal fa-user-tie"></i> <span>UPSC Notes</span></a>
</div>      
<div class="top-menu-item online-tutoris">
<a href="https://www.tutorialspoint.com/tutor_connect/index.php" target="_blank" title="Top Online Tutors - Tutor Connect"><i class="fal fa-user"></i> <span>Online Tutors</span></a>
</div>
<div class="top-menu-item whiteboard">
<a href="https://www.tutorialspoint.com/whiteboard.htm" target="_blank" title="Free Online Whiteboard"><i class="fal fa-chalkboard"></i> <span>Whiteboard</span></a>
</div>
<div class="top-menu-item net-meeting">
<a href="https://www.tutorialspoint.com/netmeeting.php" target="_blank" title="A free tool for online video conferencing"><i class="fal fa-chalkboard-teacher"></i> <span>Net Meeting</span></a> 
</div>
<div class="top-menu-item articles">
<a href="https://www.tutorix.com" target="_blank" title="Tutorx - The Best Learning App" rel="nofollow"><i class="fal fa-video"></i> <span>Tutorix</span></a> 
</div>        
<div class="social-menu-item">
<a href="https://www.facebook.com/tutorialspointindia" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Facebook"><i class="fab fa-facebook-f"></i></a> 
<a href="https://www.twitter.com/tutorialspoint" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Twitter"><i class="fab fa-twitter"></i></a>
<a href="https://www.linkedin.com/company/tutorialspoint" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Linkedin"><i class="fab fa-linkedin-in"></i></a>
<a href="https://www.youtube.com/channel/UCVLbzhxVTiTLiVKeGV7WEBg" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint YouTube"><i class="fab fa-youtube"></i></a>
</div>        
</div>
</div>
<!-- Top sub-menu Ends Here -->
<!-- Top main-menu Starts Here -->
<div class="mui-appbar mui-container-fulid mui--appbar-line-height mui--z1" id="logo-menu">
<div class="mui-container">
<div class="left-menu">
<a href="https://www.tutorialspoint.com/index.htm" title="Tutorialspoint">
<img class="tp-logo" alt="tutorialspoint" src="/apache_camel/images/logo.png">
</a>
<div class="mui-dropdown">
<a class="mui-btn mui-btn--primary categories" data-mui-toggle="dropdown"><i class="fa fa-th-large"></i> 
<span>Categories <span class="mui-caret"></span></span></a>            
<ul class="mui-dropdown__menu cat-menu">
<li>
<ul>
<li><a href="/academic_tutorials.htm"><i class="fa fa-caret-right"></i> Academic Tutorials</a></li>
<li><a href="/big_data_tutorials.htm"><i class="fa fa-caret-right"></i> Big Data &amp; Analytics </a></li>
<li><a href="/computer_programming_tutorials.htm"><i class="fa fa-caret-right"></i> Computer Programming </a></li>
<li><a href="/computer_science_tutorials.htm"><i class="fa fa-caret-right"></i> Computer Science </a></li>
<li><a href="/database_tutorials.htm"><i class="fa fa-caret-right"></i> Databases </a></li>
<li><a href="/devops_tutorials.htm"><i class="fa fa-caret-right"></i> DevOps </a></li>
<li><a href="/digital_marketing_tutorials.htm"><i class="fa fa-caret-right"></i> Digital Marketing </a></li>
<li><a href="/engineering_tutorials.htm"><i class="fa fa-caret-right"></i> Engineering Tutorials </a></li>
<li><a href="/upsc_ias_exams.htm"><i class="fa fa-caret-right"></i> Exams Syllabus </a></li>
<li><a href="/famous_monuments.htm"><i class="fa fa-caret-right"></i> Famous Monuments </a></li>
<li><a href="/gate_exams_tutorials.htm"><i class="fa fa-caret-right"></i> GATE Exams Tutorials</a></li>
<li><a href="/latest_technologies.htm"><i class="fa fa-caret-right"></i> Latest Technologies </a></li>
<li><a href="/machine_learning_tutorials.htm"><i class="fa fa-caret-right"></i> Machine Learning </a></li>
<li><a href="/mainframe_tutorials.htm"><i class="fa fa-caret-right"></i> Mainframe Development </a></li>
<li><a href="/management_tutorials.htm"><i class="fa fa-caret-right"></i> Management Tutorials </a></li>
<li><a href="/maths_tutorials.htm"><i class="fa fa-caret-right"></i> Mathematics Tutorials</a></li>
<li><a href="/microsoft_technologies_tutorials.htm"><i class="fa fa-caret-right"></i> Microsoft Technologies </a></li>
<li><a href="/misc_tutorials.htm"><i class="fa fa-caret-right"></i> Misc tutorials </a></li>
<li><a href="/mobile_development_tutorials.htm"><i class="fa fa-caret-right"></i> Mobile Development </a></li>
<li><a href="/java_technology_tutorials.htm"><i class="fa fa-caret-right"></i> Java Technologies </a></li>
<li><a href="/python_technologies_tutorials.htm"><i class="fa fa-caret-right"></i> Python Technologies </a></li>
<li><a href="/sap_tutorials.htm"><i class="fa fa-caret-right"></i> SAP Tutorials </a></li>
<li><a href="/scripting_lnaguage_tutorials.htm"><i class="fa fa-caret-right"></i>Programming Scripts </a></li>
<li><a href="/selected_reading.htm"><i class="fa fa-caret-right"></i> Selected Reading </a></li>
<li><a href="/software_quality_tutorials.htm"><i class="fa fa-caret-right"></i> Software Quality </a></li>
<li><a href="/soft_skill_tutorials.htm"><i class="fa fa-caret-right"></i> Soft Skills </a></li>
<li><a href="/telecom_tutorials.htm"><i class="fa fa-caret-right"></i> Telecom Tutorials </a></li>
<li><a href="/upsc_ias_exams.htm"><i class="fa fa-caret-right"></i> UPSC IAS Exams </a></li>
<li><a href="/web_development_tutorials.htm"><i class="fa fa-caret-right"></i> Web Development </a></li>
<li><a href="/sports_tutorials.htm"><i class="fa fa-caret-right"></i> Sports Tutorials </a></li>
<li><a href="/xml_technologies_tutorials.htm"><i class="fa fa-caret-right"></i> XML Technologies </a></li>
<li><a href="/multi_language_tutorials.htm"><i class="fa fa-caret-right"></i> Multi-Language Tutorials</a></li>
<li><a href="/questions_and_answers.htm"><i class="fa fa-caret-right"></i> Interview Questions</a></li>
</ul>
</li>
</ul>
<div class="clear"></div>
</div> 
</div>
<div class="right-menu">
<div class="toc-toggle">
<a href="javascript:void(0);"><i class="fa fa-bars"></i></a>
</div>
<div class="mobile-search-btn">
<a href="https://www.tutorialspoint.com/search.htm"><i class="fal fa-search"></i></a>
</div>
<div class="search-box">
<form method="get" class="" name="searchform" action="https://www.google.com/search" target="_blank" novalidate="">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com" class="user-valid valid">
<input class="header-search-box" type="text" id="search-string" name="q" placeholder="Search your favorite tutorials..." onfocus="if (this.value == 'Search your favorite tutorials...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search your favorite tutorials...';}" autocomplete="off">
<button><i class="fal fa-search"></i></button>
</form>
</div>
<div class="menu-btn library-btn">
<a href="https://www.tutorialspoint.com/tutorialslibrary.htm"><i class="fal fa-cubes"></i> <span>Library</span></a>
</div>
<div class="menu-btn videos-btn">
<a href="https://www.tutorialspoint.com/videotutorials/index.htm"><i class="fal fa-video"></i> <span>Videos</span></a> 
</div>
<div class="menu-btn videos-btn">
<a href="https://www.tutorialspoint.com/questions/index.php"><i class="fa fa-location-arrow"></i> <span>Q/A</span></a>
</div>
<div class="menu-btn ebooks-btn">
<a href="https://store.tutorialspoint.com"><i class="fal fa-book"></i> <span>eBooks</span></a>
</div>
<div class="mui-dropdown">
<button class="mui-btn mui-btn--primary" data-mui-toggle="dropdown">
<span class="mui-caret"></span>
</button>
<ul class="mui-dropdown__menu">
<li><a href="https://www.tutorialspoint.com/tutorialslibrary.htm"><i class="fal fa-cubes"></i> <span>Library</span></a></li>
<li><a href="https://www.tutorialspoint.com/videotutorials/index.htm"><i class="fal fa-video"></i> <span>Videos</span></a></li>
<li><a href="https://store.tutorialspoint.com"><i class="fal fa-book"></i> <span>eBooks</span></a></li>
</ul>
</div>
</div>
</div>
</div>
<!-- Top main-menu Ends Here -->
</header>
<div class="mui-container-fluid content">
<div class="mui-container">
<!-- Tutorial ToC Starts Here -->
<div class="mui-col-md-3 tutorial-toc">
<div class="mini-logo">
<img src="/apache_camel/images/apache-camel-mini-logo.jpg" alt="Apache Camel Tutorial" />
</div>
<ul class="toc chapters" >
<li class="heading">Apache Camel Tutorial</li>
<li><a href="/apache_camel/index.htm">Apache Camel - Home</a></li>
<li><a href="/apache_camel/apache_camel_introduction.htm">Apache Camel - Introduction</a></li>
<li><a href="/apache_camel/apache_camel_overview.htm">Apache Camel - Overview</a></li>
<li><a href="/apache_camel/apache_camel_features.htm">Apache Camel - Features</a></li>
<li><a href="/apache_camel/apache_camel_architecture.htm">Apache Camel - Architecture</a></li>
<li><a href="/apache_camel/apache_camel_camelcontext.htm">Apache Camel - CamelContext</a></li>
<li><a href="/apache_camel/apache_camel_endpoints.htm">Apache Camel - Endpoints</a></li>
<li><a href="/apache_camel/apache_camel_components.htm">Apache Camel - Components</a></li>
<li><a href="/apache_camel/apache_camel_message_queues.htm">Apache Camel - Message Queues</a></li>
<li><a href="/apache_camel/apache_camel_project.htm">Apache Camel - Project</a></li>
<li><a href="/apache_camel/apache_camel_using_with_spring.htm">Using Camel with Spring</a></li>
<li class="heading">Apache Camel Useful Resources</li>
<li><a href="/apache_camel/apache_camel_quick_guide.htm">Apache Camel - Quick Guide</a></li>
<li><a href="/apache_camel/apache_camel_useful_resources.htm">Apache Camel - Useful Resources</a></li>
<li><a href="/apache_camel/apache_camel_discussion.htm">Apache Camel - Discussion</a></li>
</ul>
<ul class="toc reading">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="/upsc_ias_exams.htm">UPSC IAS Exams Notes</a></li>
<li><a target="_top" href="/developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="/questions_and_answers.htm">Questions and Answers</a></li>
<li><a target="_top" href="/effective_resume_writing.htm">Effective Resume Writing</a></li>
<li><a target="_top" href="/hr_interview_questions/index.htm">HR Interview Questions</a></li>
<li><a target="_top" href="/computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="/computer_whoiswho.htm">Who is Who</a></li>
</ul>
</div>
<!-- Tutorial ToC Ends Here -->
<!-- Tutorial Content Starts Here -->
<div class="mui-col-md-6 tutorial-content">
<h1>Apache Camel - Quick Guide</h1>
<hr />
<div class="top-ad-heading">Advertisements</div>
<div style="text-align: center;">
<script><!--
google_ad_client = "pub-7133395778201029";
var width = document.getElementsByClassName("tutorial-content")[0].clientWidth - 40;
google_ad_width = width;
google_ad_height = 150;
google_ad_format = width + "x150_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="mui-container-fluid button-borders">
<div class="pre-btn">
<a href="/apache_camel/apache_camel_using_with_spring.htm"><i class="fal fa-chevron-circle-left"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="/apache_camel/apache_camel_useful_resources.htm">Next Page <i class="fal fa-chevron-circle-right"></i>&nbsp;</a>
</div>
</div>
<div class="clear"></div>
<h1>Apache Camel - Introduction</h1>
<p>Consider a situation where a large online grocery store in your town such as the Bigbasket in India invites you to design an IT solution for them. The stable and scalable solution will help them overcome the software maintenance problems they are facing today. This online store has been running its business for the last decade. The store accepts online orders for different categories of products from their customers and distributes those to the respective suppliers. For example, suppose you order some soaps, oil and milk; these three items will be distributed to the three respective suppliers. The three suppliers will then send their supplies to a common distribution point from where the entire order will be fulfilled by the delivery center. Now, let us look at the problem they are facing today.</p>
<p>When this store started its business, it was accepting orders in a comma-separated plain text file. Over a period of time, the store switched to message-driven order placement. Later, some software developer suggested an XML based order placement. Eventually, the store even adapted a web service interface. Now, here comes the real problem. The orders now come in different formats. Obviously, every time the company upgraded the order acceptance format, it did not want to break the previously deployed interface so as not to cause confusions in the customer’s mind.</p>
<p>At the same time, as the business kept on growing, the store periodically added new suppliers to its repertoire. Each such supplier had its own protocol for accepting orders. Once again, we face the integration issue; our application architecture must be scalable to accommodate new suppliers with their unique order placement mechanism.</p>
<p>The entire situation is shown in the following figure &minus;</p>
<img class="full-width" src="/apache_camel/images/application_architecture.jpg" alt="Application Architecture" />
<p>Now, let us see how Apache Camel can come to your rescue to provide an elegant, maintainable, scalable solution architecture for the described scenario.</p>
<p>Before we proceed with the solution, we need to make a small assumption. For all the discussions in this tutorial, we will assume that the online orders are placed in XML format. A typical format for the order file that we will be using throughout our discussions is shown here &minus;</p>
<pre class="prettyprint notranslate">
&lt;?xml version = "1.0" encoding = "UTF-8"?&gt;
&lt;OrderID Order = "001"&gt;
   &lt;order product = "soaps"&gt;
      &lt;items&gt;
         &lt;item&gt;
            &lt;Brand&gt;Cinthol&lt;/Brand&gt;
            &lt;Type&gt;Original&lt;/Type&gt;
            &lt;Quantity&gt;4&lt;/Quantity&gt;
            &lt;Price&gt;25&lt;/Price&gt;
         &lt;/item&gt;
         &lt;item&gt;
            &lt;Brand&gt;Cinthol&lt;/Brand&gt;
            &lt;Type&gt;Lime&lt;/Type&gt;
            &lt;Quantity&gt;6&lt;/Quantity&gt;
            &lt;Price&gt;30&lt;/Price&gt;
         &lt;/item&gt;
      &lt;/items&gt;
   &lt;/order&gt;
   
   &lt;order product = "Oil"&gt;
      &lt;items&gt;
         &lt;item&gt;
            &lt;Brand&gt;Saffola&lt;/Brand&gt;
            &lt;Type&gt;Gold&lt;/Type&gt;
            &lt;Quantity&gt;2&lt;/Quantity&gt;
            &lt;Price&gt;649&lt;/Price&gt;
         &lt;/item&gt;
         &lt;item&gt;
            &lt;Brand&gt;Fortune&lt;/Brand&gt;
            &lt;Type&gt;Sunlite&lt;/Type&gt;
            &lt;Quantity&gt;1&lt;/Quantity&gt;
            &lt;Price&gt;525&lt;/Price&gt;
         &lt;/item&gt;
      &lt;/items&gt;
   &lt;/order&gt;
   
   &lt;order product = "Milk"&gt;
      &lt;items&gt;
         &lt;item&gt;
            &lt;Product&gt;Milk&lt;/Product&gt;
            &lt;Brand&gt;Amul&lt;/Brand&gt;
            &lt;Type&gt;Pure&lt;/Type&gt;
            &lt;Quantity&gt;2&lt;/Quantity&gt;
            &lt;Price&gt;60&lt;/Price&gt;
         &lt;/item&gt;
      &lt;/items&gt;
   &lt;/order&gt;
&lt;/OrderID&gt;
</pre>
<p>We will be using the above XML template to illustrate the Camel examples in this tutorial.</p>
<h1>Apache Camel - Overview</h1>
<p>Camel is a black box that receives messages from some endpoint and sends it to another one. Within the black box, the messages may be processed or simply redirected.</p>
<img class="center" src="/apache_camel/images/camel_message_box.jpg" alt="Camel Message Box" />
<p>So why have a framework for this? In practical situations as seen in the introduction case study, there may be many senders and many receivers each following its own protocol such as ftp, http and jms. The system may require many complex rules such as message from sender A should be delivered only to B &amp; C. In situations, you may have to translate the message to another format that the receiver expects. This translation may be subject to certain conditions based on the message contents. So essentially you may need to translate between protocols, glue components together, define routing rules, and provide filtering based on message contents. This is illustrated in the following figure &minus;</p>
<img class="full-width" src="/apache_camel/images/camel_framework.jpg" alt="Camel Framework" />
<p>To meet the above requirements and design a proper software architecture for many such situations, Enterprise Integration Patterns (<a href="https://www.informit.com/store/enterprise-integration-patterns-designing-building-9780321200686" target="_blank" rel="nofollow">EIP</a>) were documented by Gregor Hohpe and Bobby Woolf in 2003. Apache Camel provides the implementation of these patterns and the purpose of this tutorial is to teach you how to use Camel in situations like the one described in the introduction.</p>
<p>Apache Camel is an open source framework. It is a message-oriented middleware that provides rule-based routing and mediation engine. You can define rules such as if it is a “milk” order redirect it to a milk vendor and if it is an “oil” order redirect it to an oil vendor, and so on. Using Camel, you will be able to implement these rules and do the routing in a familiar Java code. It means that you can use your familiar Java IDE to define these rules in a type-safe environment. We do not need to use XML configuration files, which typically tend to be bulky. Camel though supports XML configuration through Spring framework, if you prefer to use XML for configuring the rules. You may even use Blueprint XML Configuration files and even a Scala DSL, if you are a Scala lover. It also means that you can use your favorite Java, Scala IDE or even a simple XML editor to configure the rules.</p>
<p>The input to this engine can be a comma-delimited text file, a POJO (Plain Old Java Object), XML are any of the several other formats supported by Camel. Similarly, the output of the engine can be redirected to a file, to a message queue or even your monitor screen for you to view the orders sent to respective vendors. These are called the endpoints and Camel supports the <a href="http://camel.apache.org/message-endpoint.html" target="_blank" rel="nofollow">Message Endpoint</a> EIP pattern. The Camel endpoints are discussed later in the Endpoints chapter.</p>
<p>Camel is typically used with <a href="https://servicemix.apache.org/" target="_blank" rel="nofollow">Apache ServiceMix</a>, <a href="https://activemq.apache.org/" target="_blank" rel="nofollow">Apache ActiveMQ</a> and <a href="https://cxf.apache.org/" target="_blank" rel="nofollow">Apache CXF</a> to implement service-oriented architectures.</p>
<h1>Apache Camel - Features</h1>
<p>Having seen an overview of Apache Camel, let us now delve into its features to see what it offers. We already know Apache Camel is an open source Java framework that essentially provides an implementation of various EIPs. Camel makes the integration easier by providing connectivity to a very large variety of transports and APIs. For example, you can easily route JMS to JSON, JSON to JMS, HTTP to JMS, FTP to JMS, even HTTP to HTTP, and connectivity to Microservices. You simply need to provide appropriate endpoints at both ends. Camel is extensible and thus in future more endpoints can be added easily to the framework.</p>
<p>To wire EIPs and transports together, you use Domain Specific Languages (DSLs) such as Java, Scala, and Groovy. A typical Java routing rule may look like &minus;</p>
<pre class="result notranslate">
from ("file:/order").to("jms:orderQueue");
</pre>
<p>This routing rule loads the files from the <b>order</b> directory, creates a JMS message with the contents of the file and sends that message to a queue called <b>orderQueue</b>.</p>
<p>Here are some of the most important features of Camel that you would find useful in developing Camel applications &minus;</p>
<ul class="list">
<li><p>Camel supports pluggable <a href="https://camel.apache.org/data-format.html" target="_blank" rel="nofollow">data</a> formats and type converters for such message transformations, so new formats and converters can be added in future. Currently, it supports several popular formats and converters; to name a few - CSV, EDI, JAXB, JSON, XmlBeans, XStream, Flatpack, Zip.</p></li>
<li><p>Camel supports pluggable <a href="https://camel.apache.org/languages.html" target="_blank" rel="nofollow">languages</a> to write predicates in DSL. Some of the supported languages include JavaScript, Groovy, Python, PHP, Ruby, SQL, XPath, XQuery.</p></li>
<li><p>Camel supports the POJO model so that you can plug in Javabeans at various points.</p></li>
<li><p>Camel eases testing of such large distributed and asynchronous systems by using messaging.</p></li>
</ul>
<p>Let us now understand the architecture of Camel and see how the various features are implemented.</p>
<h1>Apache Camel - Architecture</h1>
<p>The Camel architecture consists three components &minus; Integration Engine and Router, Processors, and Components. This is illustrated in the following figure &minus;</p>
<img class="full-width" src="/apache_camel/images/camel_architecture.jpg" alt="Camel Architecture" />
<p>The Camel core itself is very small and contains 13 essential components. The rest 80+ components are outside the core. This helps in maintaining a low dependency on where it is deployed and promotes extensions in future. The <b>Components</b> module provides an <b>Endpoint</b> interface to the external world. The Endpoints are specified by URIs, such as <b>file:/order</b> and <b>jms:orderQueue</b> that you have seen in the last chapter.</p>
<p>The <b>Processors</b> module is used for manipulating and mediating messages between Endpoints. The EIPs that I mentioned earlier are implemented in this module. It currently supports 40+ patterns as documented in the <a href="https://www.informit.com/store/enterprise-integration-patterns-designing-building-9780321200686" target="_blank" rel="nofollow">EIP book</a> and other useful processing units.</p>
<p>The <b>Processors</b> and <b>Endpoints</b> are wired together in <b>Integration Engine and Router</b> module using DSLs. While wiring these, you may use filters to filter messages based on user-defined criteria. As mentioned earlier, you have several options in writing these rules. You may use Java, Scala, Groovy, or even XML for this.</p>
<p>Now, we come to the most important component of Camel, which may be considered as the core &minus; the <b>CamelContext</b>.</p>
<h1>Apache Camel - CamelContext</h1>
<p><b>CamelContext</b> provides access to all other services in Camel as shown in the following figure &minus;</p>
<img class="center" src="/apache_camel/images/camelcontext.jpg" alt="CamelContext" />
<p>Let us look at the various services. The <b>Registry</b> module by default is a JNDI registry, which holds the name of the various Javabeans that your application uses. If you use Camel with Spring, this will be the Spring <b>ApplicationContext</b>. If you use Camel in OSGI container, this will be <b>OSGI registry</b>. The <b>Type converters</b> as the name suggests contains the various loaded type converters, which convert your input from one format to another. You may use the built-in type converters or provide your own mechanism of conversion. The <b>Components</b> module contains the components used by your application. The components are loaded by auto discovery on the <b>classpath</b> that you specify. In case of the OSGI container, these are loaded whenever a new bundle is activated. We have already discussed the <b>Endpoints</b> and <b>Routes</b> in the previous chapters. The <b>Data formats</b> module contains the loaded data formats and finally the <b>Languages</b> module represents the loaded languages.</p>
<p>The code snippet here will give you a glimpse of how a <b>CamelContext</b> is created in a Camel application &minus;</p>
<pre class="result notranslate">
CamelContext context = new DefaultCamelContext();
try {
   context.addRoutes(new RouteBuilder() {
      // Configure filters and routes
   }
}
);
</pre>
<p>The <b>DefaultCamelContext</b> class provides a concrete implementation of <b>CamelContext</b>. In <b>addRoutes</b> method, we create an anonymous instance of <b>RouteBuilder</b>. You may create multiple <b>RouteBuilder</b> instances to define more than one routing. Each route in the same context must have a unique ID. Routes can be added dynamically at the runtime. A route with the ID same as the one previously defined will replace the older route.</p>
<p>What goes inside the <b>RouteBuilder</b> instance is described next.</p>
<h2>Routes</h2>
<p>The router defines the rule for moving the message <b>from</b> to a <b>to</b> location. You use <b>RouteBuilder</b> to define a route in Java DSL. You create a route by extending the built-in <b>RouteBuilder</b> class. The route begins with a <b>from</b> endpoint and finishes at one or more to endpoints. In between the two, you implement the processing logic. You may configure any number of routes within a single <b>configure</b> method.</p>
<p>Here is a typical example of how route is created &minus;</p>
<pre class="prettyprint notranslate">
context.addRoutes(new RouteBuilder() {
   @Override
   public void configure() throws Exception {
      from("direct:DistributeOrderDSL")
      .to("stream:out");
   }
}
</pre>
<p>We override the configure method of <b>RouteBuilder</b> class and implement our routing and filtering mechanism in it. In the current case, we redirect the input received from the Endpoint <b>DistributeOrderDSL</b> to the console, which is specified by the Endpoint <b>stream:out</b>.</p>
<h2>Language Choice</h2>
<p>You may create the routes in different languages. Here are a few examples of how the same route is defined in three different languages &minus;</p>
<h3>Java DSL</h3>
<pre class="result notranslate">
from ("file:/order").to("jms:orderQueue");
</pre>
<h3>Spring DSL</h3>
<pre class="prettyprint notranslate">
&lt;route&gt;
   &lt;from uri = "file:/order"/&gt;
   &lt;to uri = "jms:orderQueue"/&gt;
&lt;/route&gt;
</pre>
<h3>Scala DSL</h3>
<pre class="prettyprint notranslate">
from "file:/order" -&gt; "jms:orderQueue"
</pre>
<h2>Filters</h2>
<p>You use filter to select a part of input content. To set up a filter, you use any arbitrary <a href="https://camel.apache.org/predicate.html" target="_blank" rel="nofollow">Predicate</a> implementation. The filtered input is then sent to your desired destination Endpoint. In this example, we filter out all orders for the soap so that those can be collectively sent to a soap supplier.</p>
<pre class="prettyprint notranslate">
from("direct:DistributeOrderDSL")
   .split(xpath("//order[@product = 'soaps']/items"))
      .to("stream:out");
</pre>
<p>In the example, we have used <b>xpath</b> predicate for filtering. If you prefer to use Java class for filtering, use the following code &minus;</p>
<pre class="prettyprint notranslate">
from("direct:DistributeOrderDSL")
   .filter()
      .method(new Order(),"filter")
         .to("stream:out");
</pre>
<p>The <b>Order</b> is your custom Java class with your own filtering mechanism.</p>
<p>You may combine multiple predicates in a single routing as here &minus;</p>
<pre class="prettyprint notranslate">
from("direct:DistributeOrderDSL")
   .choice()
      .when(header("order").isEqualTo("oil"))
         .to("direct:oil")
      .when(header("order").isEqualTo("milk"))
         .to("direct:milk")
      .otherwise()
         .to("direct:d");
</pre>
<p>So now all “oil” orders will go to oil vendor, “milk” orders will go to milk vendor and the rest to a common pool.</p>
<h2>Custom Processor</h2>
<p>You may also use custom processing. The example below creates a custom processor called <b>myCustomProcessor</b> and uses it in the route builder.</p>
<pre class="prettyprint notranslate">
Processor myCustomProcessor = new Processor() {
   public void process(Exchange exchange) {
      // implement your custom processing
   }
};
RouteBuilder builder = new RouteBuilder() {
   public void configure() {
      from("direct:DistributeOrderDSL")
      .process(myProcessor);
   }
};
</pre>
<p>You may use custom processors along with choice and filtering to get a better control on your mediation and routing &minus;</p>
<pre class="result notranslate">
from("direct:DistributeOrderDSL")
   .filter(header("order").isEqualTo("milk"))
      .process(myProcessor);
</pre>
<h2>Using XML</h2>
<p>The routes may be defined in bulkier XML, if you prefer it. The following XML snippet shows how to create a route along with some filtering via Spring XML &minus;</p>
<pre class="prettyprint notranslate">
&lt;camelContext xmlns = "http://camel.apache.org/schema/spring"&gt;
   &lt;route&gt;
      &lt;from uri = "direct:DistributeOrderXML"/&gt;
      &lt;log message = "Split by Distribute Order"/&gt;
      &lt;split&gt;
         &lt;xpath&gt;//order[@product = 'Oil']/items&lt;/xpath&gt;
         &lt;to uri = "file:src/main/resources/order/"/&gt;
         &lt;to uri = "stream:out"/&gt;
      &lt;/split&gt;
   &lt;/route&gt;
&lt;/camelContext&gt;
</pre>
<p>Having seen how routes are built, we will now see the various techniques of creating Endpoints.</p>
<h1>Apache Camel - Endpoints</h1>
<p>We have learnt about how the endpoints look like in our integration code. The expressions that we have used so far such as <b>file:/order, jms:orderQueue, direct:distributeOrderDSL</b> are the endpoints. As you see, they follow the URI specification formats. While evaluating this URI, the <b>CamelContext</b> creates the <b>Endpoint</b> instance; you need not worry about instantiating <b>Endpoint</b> implementation in your DSL.</p>
<p>Taking our earlier examples, you specify endpoints in Java DSL as here &minus;</p>
<pre class="result notranslate">
from ("file:/order").to("jms:orderQueue");
</pre>
<p>And in Spring as here &minus;</p>
<pre class="result notranslate">
&lt;route&gt;
   &lt;from uri = "file:/order"/&gt;
   &lt;to uri = "jms:orderQueue"/&gt;
&lt;/route&gt;
</pre>
<p>In both the cases, the endpoint is a constant string. In certain cases, you may like to build this string at runtime. You can do so by using Java <b>String</b> formatter methods. Camel provides another simpler approach to create these URI strings at runtime. For this purpose, Camel provides <b>fromF</b> and <b>toF</b> methods that accept the arguments with the user-specified parameters. The following statement illustrates the use of <b>toF</b> method &minus;</p>
<pre class="result notranslate">
from("direct:distributeOrderDSL”).toF("file://%s?fileName=%s", path, name);
</pre>
<p>Because of these methods, the need for using the Java built-in <b>String</b> formatter methods is obviated.</p>
<p>Camel uses <a href="https://camel.apache.org/simple.html" target="_blank" rel="nofollow">Simple</a> language by default to compute the endpoint expression. The <b>Simple</b> language was designed primarily to evaluate <b>Expressions</b> and <b>Predicates</b>without bothering much about the intricacies of <b>XPath</b>. For evaluating predicates, you can combine another language such as <b>xpath</b> with the default <b>Simple</b> language. This is done by using the plus sign to separate the other language. The code snippet here shows how to concatenate <b>xpath</b> string to the expression written in <b>Simple</b>.</p>
<pre class="result notranslate">
from("direct:start")
.toD("jms:${orderQueue}+language:xpath:/order/@id");
</pre>
<p>In <b>Spring</b>, you can achieve the same as here &minus;</p>
<pre class="result notranslate">
&lt;route&gt;
   &lt;from uri = "direct:start"/&gt;
   &lt;toD uri = "jms:${orderQueue}+language:xpath:/order/@id"/&gt;
&lt;/route&gt;
</pre>
<p>You may concatenate as many languages as you want, each separated with a plus sign from the previous one. The list of supported languages can be found <a href="https://camel.apache.org/languages.html" target="_blank" rel="nofollow">here</a>.</p>
<h1>Apache Camel - Components</h1>
<p>Camel provides several pre-built components.</p>
<p>In this chapter, we will discuss a few important components from the <b>camel-core</b> module.</p>
<h2>Bean</h2>
<p>The <b>Bean</b> component binds beans to Camel message exchanges. The URI to create an Endpoint is specified as <b>bean:beanID</b>, where <b>beanID</b> is the name of the bean as specified in the <b>Registry</b>.</p>
<pre class="prettyprint notranslate">
JndiContext jndiContext = new JndiContext();
jndiContext.bind("MilkOrder", new MilkOrderProcessor());
CamelContext camelContext = new DefaultCamelContext(jndiContext);

camelContext.addRoutes(new RouteBuilder() {
   public void configure() {
      from("direct:bigBasket")
         .to("bean:MilkOrder?method=placeOrder");
   }
});
</pre>
<p>Note how the endpoint is specified using the <b>bean:</b> protocol. You may optionally specify the bean method that is to be invoked; in this case, the method called <b>placeOrder</b> will be invoked while evaluating the Endpoint expression. The <b>MilkOrder</b> is a JNDI name to the <b>MilkOrderProcessor</b> Javabean as registered in the first two lines of the code snippet. The definition of <b>MilkOrderProcessor</b> itself is omitted here for brevity.</p>
<h2>Direct</h2>
<p>You must have noticed the use of <b>Direct</b> in our previous examples. To send an order to an oil vendor, we used <b>direct:oil</b> in the Endpoint specification. The use of <b>Direct</b> component allows you to synchronously invoke an endpoint. The following two code snippets from our previous examples illustrate the use of <b>Direct</b> &minus;</p>
<pre class="result notranslate">
.when(header("order").isEqualTo("oil"))
   .to("direct:oil")
</pre>
<p>And,</p>
<pre class="result notranslate">
from("direct:DistributeOrderDSL")
   .process(myProcessor);
</pre>
<h2>File</h2>
<p>The <b>File</b> component provides access to the file system on your machine. Using this component, you will be able to save messages from other components to a local disk. In addition, it allows other Camel components to process the local files. You may use either <b>file:directoryName[?options]</b> or <b>file://directoryName[?options]</b> as a URI format while using the File component. You have earlier seen the use of this component &minus;</p>
<pre class="result notranslate">
from ("file:/order").to("jms:orderQueue");
</pre>
<p>Note that the <b>File</b> component by default takes the directory name. Therefore, the contents of the order directory will be taken as input contents. To specify a particular file in the <b>order</b> directory, you will use the following statement &minus;</p>
<pre class="result notranslate">
from ("file:/order?fileName = order.xml").to("jms:orderQueue");
</pre>
<h2>Log</h2>
<p>The <b>Log</b> component allows you to log messages to the underlying logging mechanism. Camel uses Simple Logging Facade for Java (SLF4J) as an abstraction to various logging frameworks. You may use <b>java.util.logging, logback, log4j</b> for logging. This code snippet illustrates the use of the <b>Log</b> component &minus;</p>
<pre class="result notranslate">
from("direct:DistributeOrderDSL")
   .to("bean:MilkOrder?method = placeOrder")
   .to("log:com.example.com?level = INFO&showBody = true");
</pre>
<h2>SEDA</h2>
<p>The <b>SEDA</b> component allows you to asynchronously call another endpoint in the same <b>CamelContext</b>. If you want to call across CamelContext instances, you need to use <b>VM</b> component. The use of SEDA is illustrated here &minus;</p>
<pre class="result notranslate">
from("direct:DistributeOrderDSL")
// send it to the seda queue that is async
   .to("seda:nextOrder")
</pre>
<p>In this route, we will simply route the orders to <b>nextOrder</b> asynchronous queue. A client who has subscribed to this queue will pick up the messages from this queue.</p>
<h2>Timer</h2>
<p>The <b>Timer</b> component is used for sending out messages at regular intervals and can thus be very useful while testing Camel applications. The code snippet here fires a test message to the console every two seconds &minus;</p>
<pre class="result notranslate">
from("timer://testTimer?period = 2000")
   .setBody()
   .simple("This is a test message ${header.timer}")
      .to("stream:out");
</pre>
<h1>Apache Camel - Message Queues</h1>
<p>Most of the integration projects use messaging as it helps in creating loosely coupled application architecture. Messaging can be either synchronous or asynchronous. JMS supports both <b>point-to-point</b> and <b>publish-subscribe</b> models. You use a <b>Queue</b> for point-to-point and <b>Topic</b> for a publish-subscribe model. On a Java platform, JMS - Java Messaging Service provides an interface to a messaging server. Apache activeMQ is one such open source JMS provider. Camel does not ship with a JMS provider; however, it can be configured to use activeMQ. To use this component, you need to include the following jars in your project - activemq, camel-spring, and camel-jms.</p>
<p>The following code snippet shows how to configure Camel for activeMQ.</p>
<pre class="prettyprint notranslate">
&lt;bean id = "jms" class = "org.apache.camel.component.jms.JmsComponent"&gt;
   &lt;property name = "connectionFactory"&gt;
      &lt;bean class="org.apache.activemq.ActiveMQConnectionFactory"&gt;
         &lt;property name = "orderQueue" value = "tcp://localhost:61000" /&gt;
      &lt;/bean&gt;
   &lt;/property&gt;
&lt;/bean&gt;
</pre>
<p>Here, the Camel application will start listening to a queue called <b>orderQueue</b>. The queue itself is set up in the activeMQ messaging server running on the local host and listing to port 61000. Once this is done, your application can send or receive message to this queue from any of the endpoints defined in your application.</p>
<p>Finally, it is time now to put everything together in a project to get a deeper understanding of how Camel applications are created.</p>
<h1>Apache Camel - Project</h1>
<p>We will use Maven to build a Camel project. Although, we preferable use IntelliJ IDE for development. You may use any IDE of your choice for this project.</p>
<h2>Creating New Project</h2>
<p>Create a new <b>Maven</b> project and specify the following &minus;</p>
<pre class="result notranslate">
GroupId: Basket
ArtifactId: Basket
</pre>
<p>Select the default location for your project or if you prefer specify the directory of your choice.</p>
<h2>Adding Dependencies</h2>
<p>You need to add few dependencies to use Camel. The dependencies are added in <b>pom.xml</b>. So open pom.xml and add following two dependencies &minus;</p>
<pre class="prettyprint notranslate">
&lt;dependencies&gt;
   &lt;dependency&gt;
      &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
      &lt;artifactId&gt;camel-core&lt;/artifactId&gt;
      &lt;version&gt;2.20.0&lt;/version&gt;
   &lt;/dependency&gt;
   &lt;dependency&gt;
      &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
      &lt;artifactId&gt;camel-stream&lt;/artifactId&gt;
      &lt;version&gt;2.20.0&lt;/version&gt;
   &lt;/dependency&gt;
&lt;/dependencies&gt;
</pre>
<p><b>Note</b> &minus; We need the bare minimum dependencies for our application. As you use more Camel components from its libraries, you will need to add the corresponding dependencies in this pom.xml file.</p>
<h2>Creating Java DSL</h2>
<p>Next, you will write your filtering and routing code in a Java DSL. Create a new Java class called <b>DistributeOrderDSL</b>. Add the following code to it &minus;</p>
<pre class="prettyprint notranslate">
public class DistributeOrderDSL {
   public static void main(String[] args) throws Exception {
      CamelContext context = new DefaultCamelContext();
      try {
         context.addRoutes(new RouteBuilder() {
            @Override
            public void configure() throws Exception {
               from("direct:DistributeOrderDSL")
                  .split(xpath("//order[@product='soaps']/items")).to("stream:out");
               
               // .to("file:src/main/resources/order/");
            }
         });
         context.start();
         ProducerTemplate orderProducerTemplate = context.createProducerTemplate();
         InputStream orderInputStream = new FileInputStream(ClassLoader.getSystemClassLoader()
            .getResource("order.xml").getFile());
         orderProducerTemplate.sendBody("direct:DistributeOrderDSL", orderInputStream);
      } finally {
         context.stop();
      }
   }
}
</pre>
<p>In the <b>main</b> method, first we create <b>CamelContext</b> by instantiating a default implementation provided in <b>DefaultCamelContext</b> class.</p>
<pre class="result notranslate">
CamelContext context = new DefaultCamelContext();
</pre>
<p>Next, we add a route by creating an anonymous <b>RouteBuilder</b> instance &minus;</p>
<pre class="result notranslate">
context.addRoutes(new RouteBuilder() {
</pre>
<p>We override the <b>configure</b> method to add a route from a direct URI <b>DistributeOrderDSL</b> to the system console. We provide some filtering by using the xpath query.</p>
<pre class="result notranslate">
public void configure() throws Exception {
   from("direct:DistributeOrderDSL")
      .split(xpath("//order[@product = 'soaps']/items")).to("stream:out");
   // .to("file:src/main/resources/order/");
}
</pre>
<p>After adding the route, we start the context &minus;</p>
<pre class="result notranslate">
context.start();
</pre>
<p>Next, we add the code for creating our direct URI - <b>DistributeOrderDSL</b>.</p>
<pre class="result notranslate">
ProducerTemplate orderProducerTemplate = context.createProducerTemplate();
InputStream orderInputStream = new FileInputStream(ClassLoader.getSystemClassLoader()
   .getResource("order.xml").getFile());
</pre>
<p>Finally, we start the processing &minus;</p>
<pre class="result notranslate">
orderProducerTemplate.sendBody("direct:DistributeOrderDSL", orderInputStream);
</pre>
<p>Now, as your Java DSL code is completed, the only thing that remains before testing the application is to add the <b>order.xml</b> file to your project. You may use the sample XML shown in the Introduction chapter for this purpose.</p>
<h2>Test Results</h2>
<p>When you run the application, you would see the following output &minus;</p>
<pre class="prettyprint notranslate">
&lt;items&gt;
   &lt;item&gt;
      &lt;Brand&gt;Cinthol&lt;/Brand&gt;
      &lt;Type&gt;Original&lt;/Type&gt;
      &lt;Quantity&gt;4&lt;/Quantity&gt;
      &lt;Price&gt;25&lt;/Price&gt;
   &lt;/item&gt;
   &lt;item&gt;
      &lt;Brand&gt;Cinthol&lt;/Brand&gt;
      &lt;Type&gt;Lime&lt;/Type&gt;
      &lt;Quantity&gt;6&lt;/Quantity&gt;
      &lt;Price&gt;30&lt;/Price&gt;
   &lt;/item&gt;
&lt;/items&gt;
</pre>
<p>Note that only orders for Soaps are listed here. If you wish to store this to a local file, just comment the <b>stream.out</b> line and uncomment the following line in your <b>configure</b> method &minus;</p>
<pre class="result notranslate">
// .to("file:src/main/resources/order/");
</pre>
<p>In our subsequent section, we will learn how to use Camel with Spring.</p>
<h1>Apache Camel - Using with Spring</h1>
<p>We will now recreate the application from the previous chapter using Spring. This will give us an idea of how to create Camel routing in XML rather than a DSL.</p>
<h2>Creating New Project</h2>
<p>Create a new <b>Maven</b> project and specify the following &minus;</p>
<pre class="result notranslate">
GroupId: BasketWithSpring
ArtifactId: BasketWithSpring
</pre>
<p>Select the default location for your project or if you prefer specify the directory of your choice.</p>
<h2>Adding Dependencies</h2>
<p>In addition to the core dependencies that you used in the earlier application, you need to add few more dependencies to use Spring. The dependencies are added in pom.xml. Now, open pom.xml and add the following dependencies &minus;</p>
<pre class="prettyprint notranslate">
&lt;dependencies&gt;
   ...
   &lt;dependency&gt;
      &lt;groupId&gt;org.springframework&lt;/groupId&gt;
      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
      &lt;version&gt;5.1.3.RELEASE&lt;/version&gt;
   &lt;/dependency&gt;
   
   &lt;dependency&gt;
      &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;
      &lt;artifactId&gt;activemq-pool&lt;/artifactId&gt;
      &lt;version&gt;5.15.2&lt;/version&gt;
   &lt;/dependency&gt;
   
   &lt;dependency&gt;
      &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;
      &lt;artifactId&gt;activemq-pool&lt;/artifactId&gt;
      &lt;version&gt;5.15.1&lt;/version&gt;
   &lt;/dependency&gt;
   
   &lt;dependency&gt;
      &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
      &lt;artifactId&gt;camel-spring&lt;/artifactId&gt;
      &lt;version&gt;2.15.1&lt;/version&gt;
   &lt;/dependency&gt;
&lt;/dependencies&gt;
</pre>
<h2>Creating Java DSL for Spring</h2>
<p>Let us now create a new Java class called <b>DistributeOrderXML</b>. Add the following code to it &minus;</p>
<pre class="prettyprint notranslate">
public class DistributeOrderXML {
   public static void main(String[] args) throws Exception {
      ApplicationContext appContext = new ClassPathXmlApplicationContext(
         "SpringRouteContext.xml");
      CamelContext camelContext = SpringCamelContext.springCamelContext(appContext, false);
      try {
         camelContext.start();
         ProducerTemplate orderProducerTemplate = camelContext.createProducerTemplate();
         InputStream orderInputStream = new FileInputStream(ClassLoader.getSystemClassLoader()
            .getResource("order.xml").getFile());
         
         orderProducerTemplate.sendBody("direct:DistributeOrderXML", orderInputStream);
      } finally {
         camelContext.stop();
      }
   }
}
</pre>
<p>In the <b>main</b> method, first we create an instance of <b>ApplicationContext</b>, which is the central interface within a Spring application. In its constructor, we specify the name of the XML file that contains our routing and filtering information.</p>
<pre class="result notranslate">
ApplicationContext appContext = new ClassPathXmlApplicationContext(
   "SpringRouteContext.xml");
</pre>
<p>Next, we create <b>CamelContext</b> specifying the above created <b>ApplicationContext</b> in its parameter.</p>
<pre class="result notranslate">
CamelContext camelContext = SpringCamelContext.springCamelContext(appContext, false);
</pre>
<p>At this point, our routing and filtering is set up. Therefore, we start the <b>CamelContext</b> using its <b>start</b> method. As in the earlier case, we define the Endpoint for loading the order.xml file and start the processing. Now, let us understand how routing is defined in XML.</p>
<h2>Creating Application Context</h2>
<p>Add a new XML file to the project and call it <b>SpringRouteContext.xml.</b> Cut-n-paste the following contents to this file.</p>
<pre class="prettyprint notranslate">
&lt;?xml version = "1.0" encoding = "UTF-8"?&gt;
&lt;beans xmlns = "http://www.springframework.org/schema/beans"
   xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation = "
      http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans.xsd
      http://camel.apache.org/schema/spring
      http://camel.apache.org/schema/spring/camel-spring.xsd "&gt;
   &lt;camelContext xmlns = "http://camel.apache.org/schema/spring"&gt;
      &lt;route&gt;
         &lt;from uri = "direct:DistributeOrderXML"/&gt;
         &lt;log message = "Split by Distribute Order"/&gt;
         &lt;split&gt;
            &lt;xpath&gt;//order[@product = 'Oil']/items&lt;/xpath&gt;
            &lt;to uri = "file:src/main/resources/order/"/&gt;
            &lt;to uri = "stream:out"/&gt;
         &lt;/split&gt;
      &lt;/route&gt;
   &lt;/camelContext&gt;
&lt;/beans&gt;
</pre>
<p>Here, we define the xpath query as follows, note that we now select all orders for “oil”.</p>
<pre class="result notranslate">
&lt;xpath&gt;//order[@product = 'Oil']/items&lt;/xpath&gt;
</pre>
<p>The output Endpoints are multiple. The first endpoint specifies the <b>order</b> folder and the second one specifies the console.</p>
<pre class="result notranslate">
&lt;to uri = "file:src/main/resources/order/"/&gt;
&lt;to uri = "stream:out"/&gt;
</pre>
<p>Run the application.</p>
<h2>Test Results</h2>
<p>When you run the application, you will see the following output on screen.</p>
<pre class="prettyprint notranslate">
&lt;items&gt;
   &lt;item&gt;
      &lt;Brand&gt;Cinthol&lt;/Brand&gt;
      &lt;Type&gt;Original&lt;/Type&gt;
      &lt;Quantity&gt;4&lt;/Quantity&gt;
      &lt;Price&gt;25&lt;/Price&gt;
   &lt;/item&gt;
   &lt;item&gt;
      &lt;Brand&gt;Cinthol&lt;/Brand&gt;
      &lt;Type&gt;Lime&lt;/Type&gt;
      &lt;Quantity&gt;6&lt;/Quantity&gt;
      &lt;Price&gt;30&lt;/Price&gt;
   &lt;/item&gt;
&lt;/items&gt;
</pre>
<p>Check out the <b>order</b> folder in the path specified by you. You will find a newly created file that contains the above XML code.</p>
<h2>Conclusion</h2>
<p>Camel provides a ready-to-use framework that implements EIPs to ease your integration projects. It supports coding in domain-specific languages and also the use of XML.</p>
<div class="mui-container-fluid button-borders show">
<div class="pre-btn">
<a href="/apache_camel/apache_camel_using_with_spring.htm"><i class="fal fa-chevron-circle-left"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="/apache_camel/apache_camel_useful_resources.htm">Next Page <i class="fal fa-chevron-circle-right"></i>&nbsp;</a>
</div>
</div>
<div class="google-bottom-ads">
<div>Advertisements</div>
<script><!--
var width = 580;
var height = 400;
var format = "580x400_as";
if( window.innerWidth < 468 ){
   width = 300;
   height = 250;
   format = "300x250_as";
}
google_ad_client = "pub-7133395778201029";
google_ad_width = width;
google_ad_height = height;
google_ad_format = format;
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<div class="space-bottom"></div>
</div>
</div>
<!-- Tutorial Content Ends Here -->
<!-- Right Column Starts Here -->
<div class="mui-col-md-2 google-right-ads">
<div class="space-top"></div>
<div class="google-right-ad" style="margin: 0px auto !important;margin-top:5px;">
<script><!--
google_ad_client = "pub-2537027957187252";
google_ad_width = 300;
google_ad_height = 250;
google_ad_format = "300x250_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="google-right-ad">
<div class="adsbyvli" data-ad-slot="vi_9012177"></div>
<script>(vitag.Init = window.vitag.Init || []).push(function(){viAPItag.display("vi_9012177")})</script>
</div>
<div class="space-bottom"></div>
<div class="google-right-ad">
<div class="adsbyvli" data-ad-slot="vi_9013289"></div>
<script>(vitag.Init = window.vitag.Init || []).push(function(){viAPItag.display("vi_9013289")})</script>
</div>
<div class="space-bottom" style="margin-bottom:15px;"></div>
</div>
<!-- Right Column Ends Here -->
</div>
</div>
<div class="clear"></div>
<footer id="footer">
<div class="mui--text-center">
<div class="mui--text-caption mui--text-light">
<a href="/index.htm" class="logo"><img class="img-responsive" src="/images/logo-black.png" alt="Tutorials Point" title="Tutorials Point"></a>
</div>
<ul class="mui-list--inline mui--text-body2 mui--text-light">
<li><a href="/about/index.htm"><i class="fal fa-globe"></i> About us</a></li>
<li><a href="/about/about_terms_of_use.htm"><i class="fal fa-asterisk"></i> Terms of use</a></li>
<li><a href="/about/about_privacy.htm#cookies"> <i class="fal fa-shield-check"></i> Cookies Policy</a></li>
<li><a href="/about/faq.htm"><i class="fal fa-question-circle"></i> FAQ's</a></li>
<li><a href="/about/about_helping.htm"><i class="fal fa-hands-helping"></i> Helping</a></li>
<li><a href="/about/contact_us.htm"><i class="fal fa-map-marker-alt"></i> Contact</a></li>
</ul>
<div class="mui--text-caption mui--text-light bottom-copyright-text">&copy; Copyright 2019. All Rights Reserved.</div>
</div>
<div id="privacy-banner">
  <div>
    <p>
      We use cookies to provide and improve our services. By using our site, you consent to our Cookies Policy.
      <a id="banner-accept" href="#">Accept</a>
      <a id="banner-learn" href="/about/about_cookies.htm" target="_blank">Learn more</a>
    </p>
  </div>
</div>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-232293-17"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-232293-6');
</script>
</footer>
</body>
</html>
